<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title></title><link href="http://localhost:8000/" rel="alternate"></link><link href="http://localhost:8000/feeds/programming.atom.xml" rel="self"></link><id>http://localhost:8000/</id><updated>2014-12-04T01:33:59+08:00</updated><entry><title>分析手机APP通信协议</title><link href="http://localhost:8000/programming/e58886e69e90e6898be69cbaappe9809ae4bfa1e58d8fe8aeae.html" rel="alternate"></link><updated>2014-12-04T01:33:59+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2014-12-04:programming/e58886e69e90e6898be69cbaappe9809ae4bfa1e58d8fe8aeae.html</id><summary type="html">&lt;p&gt;首先在Fedora系统里安装squid, 然后启动squid服务, 默认监听端口为3128&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# yum install -y squid&lt;/span&gt;
&lt;span class="c"&gt;# service squid start&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;联接手机到无线网络, 设置在手机设置-&amp;gt;WLAN里，修改所链接网络的设置，在高级选项里设置代理，代理IP地址为 Fedora 的IP地址, 端口为3128&lt;/p&gt;
&lt;p&gt;然后在fedora上使用wireshark, tcpdump进行监听, 这里可以通过源IP和目标IP,协议端口等进行过滤, APP一般都是通过HTTP请求和后台进行数据通信.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;# yum install -y wireshark-gnome&lt;/span&gt;
&lt;span class="c"&gt;# sudo tcpdump -i wlp3s0 src 10.208.9.91 or dst 10.208.9.91 -A&lt;/span&gt;
&lt;span class="c"&gt;# wireshark&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>(Python Author) Guido van Rossum on finding his way</title><link href="http://localhost:8000/programming/python-author-guido-van-rossum-on-finding-his-way.html" rel="alternate"></link><updated>2014-09-21T00:19:49+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2014-09-21:programming/python-author-guido-van-rossum-on-finding-his-way.html</id><summary type="html">&lt;p&gt;Guido van Rossum is the creator and benevolent dictator for life (a.k.a. BDFL) of the Python programming language. Here he reflects on his path and shares what he’s been working on since joining Dropbox. Read on for this and a hint at what’s next for Dropbox, for Python, and for the BDFL himself.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;You were an electronics hobbyist before becoming a programmer. How did you get started in electronics?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Okay, we’re going waaaay back. I don’t know exactly why I got into electronics as a kid. I remember that from the last grade in elementary school and probably through my second year in university, electronics kits and my own designs were one of my big passions.&lt;/p&gt;
&lt;p&gt;It wasn’t always an easy path. In elementary school, I took one of the first projects I built into class as a show and tell project. There was no one who understood what it was or why it was interesting or cared. It’s a very vague memory. I just know that I took it in, and it fell flat.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Was there a time when you eventually found your people?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In high school, I hung out with a few other guys who had similar hobbies. We were all the geekiest kids in class.&lt;/p&gt;
&lt;p&gt;I remember our physics teacher really encouraging us. The three of us worked together to build a large electronic device that was then used in demonstrations in front of the classroom. That was very satisfying.&lt;/p&gt;
&lt;p&gt;Throughout high school, I had a very vague idea of what kinds of careers would be open to me. My general idea was that I was good at both sciences and languages and not so good in social areas. I ended up choosing mathematics.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How did you go from electronics to programming?&lt;/strong&gt;&lt;!-- more --&gt;&lt;/p&gt;
&lt;p&gt;I went to the University of Amsterdam and enrolled in the mathematics department and started taking math classes there. Some of the classes turned out to be programming classes. As part of the class, you got access to a large mainframe computer that was in the basement of the building. I almost instantly discovered that was my passion.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://d262ilb51hltx0.cloudfront.net/max/700/1*5Z4e-AOw_zZbFbtEJAzwRQ.jpeg" /&gt;&lt;/p&gt;
&lt;p&gt;Guido gave a talk on Python 3 during Hack Week 2014 at Dropbox in San Francisco. / Photo by&lt;a href="http://www.danstroud.me/"&gt;Dan Stroud&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;What interested you about computer science?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Having progressed through hobby electronics, from very simple analog circuits to somewhat complex digital circuits made with small integrated circuits—this was the early seventies—I was very excited to suddenly have access to a mainframe computer, even though initially I had to enter my programs using punch cards. It was a very slow and tedious process, but it was incredibly exciting to learn how it worked.&lt;/p&gt;
&lt;p&gt;I very quickly gave up on all the electronics stuff because the computer stuff was so much more interesting. In my second year in university, I already started realizing that programming was incredibly exciting and interesting. I was also very good at it, but the core of mathematics—whether it was Calculus or Algebra, or certainly any of the more advanced, “real” mathematical topics—were not really my thing.&lt;/p&gt;
&lt;p&gt;Then I somehow managed to change my curriculum—they were incredibly flexible about it—to a mixture of math and computer science. I took all the programming and computer science-related topics that were on offer.&lt;/p&gt;
&lt;p&gt;Then I applied for a part-time position at the university data center, and it turned out that there was a group there that had a very small number of openings for talented students. They instantly hired me, and I spent more than five years working there while I was still studying.&lt;/p&gt;
&lt;p&gt;I was actually close to dropping out.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Oh my gosh! Why?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The job was so fun, and studying for exams wasn’t. Fortunately, my manager at the data center, as well as one of my professors, cared enough about me to give me small nudges in the direction of, “Well, maybe it would be smart to graduate, and then you can do this full-time!” (laughing)&lt;/p&gt;
&lt;p&gt;And that worked. I did graduate, and I had a job lined up at a research institute, also in Amsterdam, doing programming right away.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;On Twitter, you once wrote, “In America, I’m Dutch, but around Dutch folks I’m American. #conflicted.” Where do you feel most at home?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Well, I would say, I just feel most at home in my own house with my family. (laughing)&lt;/p&gt;
&lt;p&gt;My wife is American; my son has both nationalities, but he speaks English. I’ve lived in the US for eighteen years now. I actually don’t imagine I would ever go back to Europe for a long period of time. I expect I’ll spend most of the rest of my life in the US—probably in the Bay Area, because it’s such a great place.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;What are you working on lately at Dropbox?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I’ve completed a new feature that we’ve needed for the &lt;a href="https://www.dropbox.com/developers/datastore"&gt;Datastore API&lt;/a&gt; for a long time. It’s the ability to &lt;a href="https://www.dropbox.com/developers/blog/107/new-datastore-features-shared-datastores-local-datastores-and-datastore-webhooks"&gt;share datastores&lt;/a&gt; with other users. It launches today.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://d262ilb51hltx0.cloudfront.net/max/800/1*NMJBScQgtLZE0zmeOA1nJw.png" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Is this something you’re working on with a team, or are you working more independently?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;For this particular datastores feature, I’ve done most of the work independently, with two other people contributing, mainly in the form of code reviews. The datastore project as a whole has included a large team of contributors, including several talented interns.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;When you joined Dropbox, you specified that you would be a regular engineer, as opposed to a manager or a technical lead. Why was that distinction important to you?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I think it was because I enjoy doing actual engineering work, and I don’t enjoy as much the formal aspect of management. In the past, I was thrown into such a role for a small team, and it never really worked out. I never really felt comfortable in that type of role. I was always much more comfortable just writing code. Over time, that has included technical leadership, but I like to be part of the work and not just tell people what to do or how to do it.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How do you balance your two roles as Dropbox engineer and Python BDFL?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In terms of time management, they overlap and compete. I don’t set aside a particular time of my day or my week or my year for Python BDFL stuff versus Dropbox stuff.&lt;/p&gt;
&lt;p&gt;What happens in practice is that sometimes one thing requires a lot of attention and focus, and then I reduce my activity on the other front, and vice versa.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://d262ilb51hltx0.cloudfront.net/max/1200/1*AriSTNW_leEP85c7r-wcew.jpeg" /&gt;&lt;/p&gt;
&lt;p&gt;Guido introduces&lt;a href="http://vimeo.com/70644595"&gt;Dropbox datastores&lt;/a&gt; at DBX 2013. / Photo by Doug Cody&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;What do you like most about working at Dropbox?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;One of the most satisfying things here is to see such a large group of people being so enthusiastic about the products and the features, and being so creative; to see everybody working together and owning their mistakes and having fun going through all this stuff and being incredibly focused. It’s just very exciting to see this group be so productive and enthusiastic and powerful and capable.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;What did you work on for your Hack Week project?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Static typing for Python. It’s based on the PhD thesis of one of our engineers, Jukka Lehtosalo. He wrote a static typing tool for Python, and essentially what he did for his thesis work was a prototype. During Hack Week, with a group of seven people—including three guests and two interns—we improved the prototype, added a number of tools, did a whole bunch of integration work.&lt;/p&gt;
&lt;p&gt;There’s even more stuff to do, of course. We didn’t produce an end product, but we did a lot of work on the tool, and we have a couple of very interesting ideas on how to move this forward.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why did you choose static typing for your project?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I think that at least adding static typing as an optional part of Python is a good thing for the distant future. I also think that this particular tool may be able to help Dropbox convert our own Python 2-based codebase to Python 3.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://d262ilb51hltx0.cloudfront.net/max/800/1*yemdZovwCmvm7b2Dkm6SRQ.png" /&gt;&lt;/p&gt;
&lt;p&gt;The first lines of Dropbox code were written in Python, and Python Bees have featured at DBX and previous Dropbox hack weeks.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How do you balance the more immediate needs and requests from programmers with a long-term vision for Python?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Python has a large group of core developers who do a lot of the work and review even more of the work that goes into Python. The Python developer community has its own processes for evolving the language. Over more than twenty years of working on the language together as a community, we’ve learned some constraints on how we can evolve this particular programming language.&lt;/p&gt;
&lt;p&gt;If you change the language too fast, you leave your users behind, or your users complain that their programs are always broken by every new version. If you change too slowly, you get complaints from users that either their bugs don’t get fixed or their feature request never get executed. That’s a tricky balance, because one person’s mind-boggling speed is another person’s snail’s pace.&lt;/p&gt;
&lt;p&gt;Over time, there’s a whole body of knowledge around what, in general, is a good idea to add to the language or to the library, and what things are better left as open source projects that people can install as needed.&lt;/p&gt;
&lt;p&gt;Learning all that has been an incredible experience for me. I’m currently at a point where I’m pretty comfortable that if I decided to retire from that community, the rest of the developers understand the process and understand the reasons why we do things and how to have discussions that result in decisions on a reasonable timescale.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Do you ever think about retiring from the Python community, and what you would do with your time then?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;(laughing) That is a very good combo of questions because I definitely think about retirement and what that would mean for me and what I would do then, what it would mean for my family. So far, I’m just thinking about it.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Do you ever get nervous about new programming languages popping up and getting a lot of attention?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I find it an interesting phenomenon. It doesn’t make me nervous. It tends to make the more recent converts to a language nervous because they see that they spent three weeks or six weeks or two years becoming an expert at some level that is important to them. And then, with their limited experience, they might imagine that next year, everything they learned about Python will be useless and they’ll have to start over.&lt;/p&gt;
&lt;p&gt;I’ve seen cycles like that of the popularity of systems and languages and software. Things come and go. I don’t know where Python will be five years or fifteen years from now, but I’m not worried that Python will suddenly disappear. I expect that Python still has a large path ahead of it, where it will absorb new ideas and adapt to new environments. I also expect that, at some point, something else will happen that gradually takes over, maybe borrowing ideas from Python but putting them into a different shape or combining them differently with ideas from other languages.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://d262ilb51hltx0.cloudfront.net/max/1200/1*omEEAJapdc0XY9IfR-mFlA.jpeg" /&gt;&lt;/p&gt;
&lt;p&gt;Guido teamed up with Dropbox CEO Drew Houston in the DBX 2013 Python Bee. / Photos by Doug Cody&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://d262ilb51hltx0.cloudfront.net/max/1200/1*4saVabl5aGfdTVuPLBNBCQ.jpeg" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://d262ilb51hltx0.cloudfront.net/max/1200/1*w-ziwbjd1WMkmuuoFK9q0Q.jpeg" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;In your &lt;/strong&gt;&lt;a href="http://neopythonic.blogspot.com/2013/10/letter-to-young-programmer.html"&gt;&lt;strong&gt;letter to a young programmer&lt;/strong&gt;&lt;/a&gt;&lt;strong&gt;, you wrote that you hoped they would dream big. But one of the challenges for programmers now is that there are so many big dreams to be had, so many opportunities competing for their attention. Do you have any advice for finding direction early on?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Early in their careers? Well, I would not be the expert on that myself, because I took a long time to settle in my career. Looking back—I’m obviously very happy with how everything turned out—but I do think I was probably too passive in choosing what I wanted.&lt;/p&gt;
&lt;p&gt;I’ve almost never applied for a job. I’ve always waited until someone asked me. And while that worked out well for me, I think in general that may not be the best strategy.&lt;/p&gt;
&lt;p&gt;But don’t stress out too much about being in control of everything. There’s so much that you can’t possibly know. There’s something called the “fear of missing out.” And there are so many people who feel that if they don’t control every aspect of their curriculum, they’re not going to get the super job they want.&lt;/p&gt;
&lt;p&gt;Well, it turns out that those people who do all those things aren’t any happier than the people who make some mistakes. So I think it’s good to realize that when it comes to your long-term career, you can’t be completely in control. If you pick a particular thing too soon, you may miss an opportunity for an unexpected left turn.&lt;/p&gt;
&lt;p&gt;From: &lt;a href="https://medium.com/dropbox-makers/guido-van-rossum-on-finding-his-way-e018e8b5f6b1"&gt;https://medium.com/dropbox-makers/guido-van-rossum-on-finding-his-way-e018e8b5f6b1&lt;/a&gt;&lt;/p&gt;</summary></entry><entry><title>编程入门学习 CodeMonkey.co.il</title><link href="http://localhost:8000/programming/e7bc96e7a88be585a5e997a8e5ada6e4b9a0-codemonkey-co-il.html" rel="alternate"></link><updated>2014-08-01T10:22:20+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2014-08-01:programming/e7bc96e7a88be585a5e997a8e5ada6e4b9a0-codemonkey-co-il.html</id><summary type="html">&lt;p&gt;非常简单的编程学习网站： &lt;a href="http://www.codemonkey.co.il/"&gt;http://www.codemonkey.co.il/&lt;/a&gt;，通过三四个语法控制猴子和乌龟移动吃光所有香蕉，总共30关。很有趣，又能了解编程的一些基本概念，特别适合没有太多编程基础的人。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;step&lt;/strong&gt;用来移动对象，默认移动猴子。 “turtle.step 10” 用来移动乌龟10步。
&lt;strong&gt;turn&lt;/strong&gt; 用于转动方向，"turn left"：向左移动90度，"turn -90": 顺时针移动90度，“turnTo bridge”：移动到bridge所在方向。
&lt;strong&gt;3.times -&amp;gt; &lt;/strong&gt;实现循环&lt;/p&gt;
&lt;p&gt;要完成任务，需要躲避障碍，搭乘乌龟在河中移动，其中的距离可以使用尺子在编程时度量到。&lt;/p&gt;
&lt;p&gt;&lt;a href="http://amoskong.files.wordpress.com/2014/08/screenshot-from-2014-08-01-175627.png"&gt;&lt;img alt="Screenshot from 2014-08-01 17:56:27" src="http://amoskong.files.wordpress.com/2014/08/screenshot-from-2014-08-01-175627.png" /&gt;&lt;/a&gt; &lt;a href="http://amoskong.files.wordpress.com/2014/08/screenshot-from-2014-08-01-174028.png"&gt;&lt;img alt="Screenshot from 2014-08-01 17:40:28" src="http://amoskong.files.wordpress.com/2014/08/screenshot-from-2014-08-01-174028.png" /&gt;&lt;/a&gt; &lt;a href="http://amoskong.files.wordpress.com/2014/08/screenshot-from-2014-08-01-173319.png"&gt;&lt;img alt="Screenshot from 2014-08-01 17:33:19" src="http://amoskong.files.wordpress.com/2014/08/screenshot-from-2014-08-01-173319.png" /&gt;&lt;/a&gt;&lt;/p&gt;</summary></entry><entry><title>通过nc使用smtp命令发送邮件</title><link href="http://localhost:8000/programming/e9809ae8bf87nce4bdbfe794a8smtpe591bde4bba4e58f91e98081e982aee4bbb6.html" rel="alternate"></link><updated>2014-05-30T08:15:39+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2014-05-30:programming/e9809ae8bf87nce4bdbfe794a8smtpe591bde4bba4e58f91e98081e982aee4bbb6.html</id><summary type="html">&lt;h1 id="base64"&gt;首先转换用户名、密码字符串成base64位，后面交互认证时使用&lt;/h1&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;import&lt;/span&gt; &lt;span class="n"&gt;base64&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;base64&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encodestring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;sender&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;AXhhbXBsZV9jb21AMTYzLmNvbQ&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;base64&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encodestring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;ATEyMzQ1Ng&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;z&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;z&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;nc&lt;/span&gt; &lt;span class="n"&gt;smtp&lt;/span&gt;&lt;span class="mf"&gt;.163&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt; &lt;span class="mi"&gt;25&lt;/span&gt;
&lt;span class="mi"&gt;220&lt;/span&gt; &lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt; &lt;span class="n"&gt;Anti&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;spam&lt;/span&gt; &lt;span class="n"&gt;GT&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;Coremail&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;163&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20121016&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;helo&lt;/span&gt; &lt;span class="n"&gt;amosk&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;告诉服务器客户端主机名&lt;/span&gt;
&lt;span class="mi"&gt;250&lt;/span&gt; &lt;span class="n"&gt;OK&lt;/span&gt;
&lt;span class="n"&gt;auth&lt;/span&gt; &lt;span class="n"&gt;login&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;认证&lt;/span&gt;
&lt;span class="mi"&gt;334&lt;/span&gt; &lt;span class="n"&gt;dXNlcm5hbWU6&lt;/span&gt;
&lt;span class="n"&gt;AXhhbXBsZV9jb21AMTYzLmNvbQ&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;
&lt;span class="mi"&gt;334&lt;/span&gt; &lt;span class="n"&gt;UGFzc3dvcmQ6&lt;/span&gt;
&lt;span class="n"&gt;ATEyMzQ1Ng&lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;
&lt;span class="mi"&gt;235&lt;/span&gt; &lt;span class="n"&gt;Authentication&lt;/span&gt; &lt;span class="n"&gt;successful&lt;/span&gt;
&lt;span class="n"&gt;mail&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;sender&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;发件人&lt;/span&gt;
&lt;span class="mi"&gt;250&lt;/span&gt; &lt;span class="n"&gt;Mail&lt;/span&gt; &lt;span class="n"&gt;OK&lt;/span&gt;
&lt;span class="n"&gt;rcpt&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;receiver&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;收件人&lt;/span&gt;
&lt;span class="mi"&gt;250&lt;/span&gt; &lt;span class="n"&gt;Mail&lt;/span&gt; &lt;span class="n"&gt;OK&lt;/span&gt;
&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;通知服务器开始接受邮件内容&lt;/span&gt;
&lt;span class="mi"&gt;354&lt;/span&gt; &lt;span class="n"&gt;End&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="n"&gt;with&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="nl"&gt;To:&lt;/span&gt;&lt;span class="n"&gt;receiver&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
&lt;span class="nl"&gt;From:&lt;/span&gt;&lt;span class="n"&gt;sender&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
&lt;span class="nl"&gt;Subject:&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt; &lt;span class="n"&gt;subject&lt;/span&gt;

&lt;span class="n"&gt;mail&lt;/span&gt; &lt;span class="n"&gt;body&lt;/span&gt;
&lt;span class="n"&gt;hello&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;world&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;

&lt;span class="p"&gt;.&lt;/span&gt;   &lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;.&amp;#39;&lt;/span&gt; &lt;span class="err"&gt;代表邮件内容输入结束&lt;/span&gt;
&lt;span class="mi"&gt;250&lt;/span&gt; &lt;span class="n"&gt;Mail&lt;/span&gt; &lt;span class="n"&gt;OK&lt;/span&gt; &lt;span class="n"&gt;queued&lt;/span&gt; &lt;span class="n"&gt;as&lt;/span&gt; &lt;span class="n"&gt;smtp12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;EMCowECpgLOcO4hTMpa4AA&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="mf"&gt;.1548&lt;/span&gt;&lt;span class="n"&gt;S2&lt;/span&gt; &lt;span class="mi"&gt;1401437200&lt;/span&gt;
&lt;span class="n"&gt;quit&lt;/span&gt;
&lt;span class="mi"&gt;221&lt;/span&gt; &lt;span class="n"&gt;Bye&lt;/span&gt;
&lt;span class="o"&gt;^&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;





&lt;span class="cp"&gt;# 使用smtplib库发送邮件&lt;/span&gt;
&lt;span class="n"&gt;import&lt;/span&gt; &lt;span class="n"&gt;base64&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;smtplib&lt;/span&gt;

&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;smtplib&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SMTP&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;smtp&lt;/span&gt;&lt;span class="mf"&gt;.163&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_debuglevel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;docmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;helo&lt;/span&gt; &lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;docmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;auth&lt;/span&gt; &lt;span class="n"&gt;login&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;base64&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encodestring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;sender&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getreply&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;base64&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encodestring&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getreply&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;docmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;mail&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;sender&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;docmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;rcpt&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;receiver&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;docmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;msg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="n"&gt;To&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;receiver&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
&lt;span class="nl"&gt;From:&lt;/span&gt;&lt;span class="n"&gt;sender&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
&lt;span class="nl"&gt;Subject:&lt;/span&gt; &lt;span class="n"&gt;test&lt;/span&gt; &lt;span class="n"&gt;subject&lt;/span&gt;

&lt;span class="n"&gt;hello&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;world&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;

&lt;span class="err"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;msg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;.rn&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getreply&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quit&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>树莓派驱动4位数码管显示时间</title><link href="http://localhost:8000/programming/e6a091e88e93e6b4bee9a9b1e58aa84e4bd8de695b0e7a081e7aea1e698bee7a4bae697b6e997b4.html" rel="alternate"></link><updated>2014-04-21T14:02:46+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2014-04-21:programming/e6a091e88e93e6b4bee9a9b1e58aa84e4bd8de695b0e7a081e7aea1e698bee7a4bae697b6e997b4.html</id><summary type="html">&lt;p&gt;数码管的显示分为静态和动态两种。静态就是一个GPIO控制一个LED小灯管。
但是随着控制数码管数量的增加，GPIO口就占用太多了，所以多个数码管可以有 共阴 和 共阳 两种共享引脚。这个时候如果采用静态点亮数码管的方式，共享引脚的数码管显示完全一样。所谓动态方式，就是通过GPIO选择引脚，选择要点亮的某个数码管，然后通过共享引脚点亮LED小灯管。然后快速切换点亮其他数码管，由于点亮的切换频率非常快所以感觉上数码管一直亮着。&lt;/p&gt;
&lt;p&gt;当然也可以使用辅助芯片，如MAX7129等，只需要用更加简化的方式控制显示数据。
点击查看&lt;a href="http://wenku.baidu.com/link?url=jjL2_DTDrOI2Xa4KsnTgSahtxNIvUjgxaVYNuAetjKcr5mYLmCoqA0OeanIX--VY9iA3lH22v530y9VX-AfXPdzKdLbsem1WBdgngV5zd5q"&gt;详细文档&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;这里我使用树莓派自己编码，动态刷新各个数码管。买的数码管有24位引脚，37个led小灯，这个掩饰只使用了4 × 7 = 28 个led灯。
代码：&lt;a href="https://github.com/kongove/toys/blob/master/RaspberryPi/leds-example.py"&gt;https://github.com/kongove/toys/blob/master/RaspberryPi/leds-example.py&lt;/a&gt;
新版本的Python RPi.GPIO里支持提供了一些事件检测函数，可以简化程序，我还没升级。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#&lt;/span&gt;
&lt;span class="c"&gt;#     __2_&lt;/span&gt;
&lt;span class="c"&gt;#    |     |    |  0 -&amp;gt;  011 1111 -&amp;gt; 0x3f&lt;/span&gt;
&lt;span class="c"&gt;#  1 |     | 3  |  1 -&amp;gt;  010 0001 -&amp;gt; 0x21&lt;/span&gt;
&lt;span class="c"&gt;#    |__7__|    |  2 -&amp;gt;  111 0110 -&amp;gt; 0x76&lt;/span&gt;
&lt;span class="c"&gt;#    |     |    |  4 -&amp;gt;  ...&lt;/span&gt;
&lt;span class="c"&gt;#  6 |     | 4  |        ...&lt;/span&gt;
&lt;span class="c"&gt;#    |__5__|    |  9 -&amp;gt;  ...      -&amp;gt; 0x5f&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;pins = [27, 17, 22, 10, 25, 24, 11] #GPIO ports&lt;/p&gt;
&lt;p&gt;sels = [14, 15, 18, 23] #GPIO ports to select led, there are four led lights&lt;/p&gt;
&lt;p&gt;nums = [0x3f, 0x21, 0x76, 0x5e, 0x4d, 0x5b, 0x7b, 0x0e, 0x7f, 0x5f] #0,1,2,3~9 对应编码&lt;/p&gt;
&lt;p&gt;演示视频：（为了效果明显这里显示的是 分钟 和 秒）
&lt;a href="http://player.youku.com/player.php/sid/XNzAxOTQxODk2/v.swf"&gt;http://player.youku.com/player.php/sid/XNzAxOTQxODk2/v.swf&lt;/a&gt;&lt;/p&gt;</summary></entry><entry><title>树莓派控制HC-SR04超声波模块测距警报</title><link href="http://localhost:8000/programming/e6a091e88e93e6b4bee68ea7e588b6hc-sr04e8b685e5a3b0e6b3a2e6a8a1e59d97e6b58be8b79de8ada6e68aa5.html" rel="alternate"></link><updated>2014-04-21T13:42:33+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2014-04-21:programming/e6a091e88e93e6b4bee68ea7e588b6hc-sr04e8b685e5a3b0e6b3a2e6a8a1e59d97e6b58be8b79de8ada6e68aa5.html</id><summary type="html">&lt;p&gt;HC-SR04超声波模块看上去很cool，我开始以为是机器人头部，有两个漂亮的眼睛。&lt;/p&gt;
&lt;p&gt;HC-SR04共有四个管脚：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;VCC 接 5+　电源&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;GND 接地&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Trig 接 GPIO端口&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Echo 接 GPIO端口&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;测试角度位15度（测试范围位一个圆锥，横切面顶角位30度），工作电流15mA，测试范围位 2cm～45cm。&lt;/p&gt;
&lt;p&gt;工作原理：
通过GPIO向 Trig 引脚发送 一个大于 10 us(1微妙=0.001毫秒=0.000001秒)的脉冲，即从低电平跳转到高电平，等待10us后，再跳回低电平。此时模块回自动发出8个40KHZ的声波脉冲，当声波返回被模块接受后，模块又会通过 Echo 管脚向树莓派第二个GPIO口发送一个脉冲，脉冲的持续时间等于声波发送到返回的时间。&lt;/p&gt;
&lt;p&gt;我们知道声音的速度为 340M/s，声波来回的时间 x 声速 / 2 就能得出测试距离。&lt;/p&gt;
&lt;p&gt;我使用树莓派GPIO接口驱动超声波模块，测量距离，并根据距离用蜂鸣器发出不同频率的警报。（功能有点类似倒车雷达）
代码： &lt;a href="https://github.com/kongove/toys/blob/master/RaspberryPi/sound-wave-alert.py"&gt;https://github.com/kongove/toys/blob/master/RaspberryPi/sound-wave-alert.py
演示&lt;/a&gt;视频：
&lt;a href="http://player.youku.com/player.php/sid/XNzAxOTU2OTcy/v.swf"&gt;http://player.youku.com/player.php/sid/XNzAxOTU2OTcy/v.swf&lt;/a&gt;&lt;/p&gt;
&lt;!-- more --&gt;

&lt;p&gt;超声波时序图：&lt;/p&gt;
&lt;p&gt;&lt;a href="http://amosk.info/blog/wp-content/uploads/2014/04/shengboshixu.jpg"&gt;&lt;img alt="shengboshixu" src="http://amosk.info/blog/wp-content/uploads/2014/04/shengboshixu.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;</summary></entry><entry><title>树莓派 + 继电器模块 + Python web：实现手机控制电灯开关</title><link href="http://localhost:8000/programming/e6a091e88e93e6b4be-e7bba7e794b5e599a8e6a8a1e59d97-python-webefbc9ae5ae9ee78eb0e6898be69cbae68ea7e588b6e794b5e781afe5bc80e585b3.html" rel="alternate"></link><updated>2014-04-21T02:34:23+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2014-04-21:programming/e6a091e88e93e6b4be-e7bba7e794b5e599a8e6a8a1e59d97-python-webefbc9ae5ae9ee78eb0e6898be69cbae68ea7e588b6e794b5e781afe5bc80e585b3.html</id><summary type="html">&lt;p&gt;目标：使用手机控制电灯开关&lt;/p&gt;
&lt;p&gt;实现方案：
通过下图的　“继电器模块”　来切断、闭合220v交流电，使用树莓派的GPIO口向继电器　“IN”　口输入高低电频，控制继电器模块。手机和树莓派的通信使用HTTP请求，在树莓派端起一个简单的web服务程序，通过手机浏览器访问。&lt;/p&gt;
&lt;p&gt;改进：
如果不是中央控制，每个继电器连接一个树莓派成本太高，而且不方便整合。更简洁的方案是使用51单片机，或者Ardunio + 蓝牙模块。Ardunio上把蓝牙作为一个串口操作，设置只需一行　“Serial.begin(9600);”　读数据一行　“val=Serial.read();”  (整个程序才20行：&lt;a href="https://github.com/hackwjfz/Arduino/blob/master/bluetooth.ino"&gt;https://github.com/hackwjfz/Arduino/blob/master/bluetooth.ino&lt;/a&gt;)
手机端可以用　"蓝牙串口调试助手"　做调试控制，也可以使用Java (Android，使用BluetoothAdapter库，并需要在AndroidManifest.xml中添加BLUETOOTH和BLUETOOTH_ADMIN权限)写一个APP读写串口。&lt;/p&gt;
&lt;p&gt;继电器连接图：
IN 接树莓派任意GPIO口，GND接树莓派GND(接地)，VCC接树莓派v3v电源。
常开和公用端接交流电200v，这样IN置高电平是开关断开，置低电平时开关闭合。如果用常闭替换常开，结果相反。
开始我接的是5v电源到VCC口，开关总是闭合状态，加了一些电阻能工作了，最后放到3v上就不用电阻了。&lt;/p&gt;
&lt;p&gt;&lt;a href="http://amoskong.files.wordpress.com/2014/04/img_20140421_085402.jpg"&gt;&lt;img alt="IMG_20140421_085402" src="http://amoskong.files.wordpress.com/2014/04/img_20140421_085402.jpg" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;简单Web服务:
这里没有使用HTTP GET/POST请求，而是对访问路径做了一个解析。访问 http://101.168.0.3/on 或 http://101.168.0.3/off ，树莓派会调用Python RPi库，把GPIO14置　“高”　或者　“低”　电平。
（备注：101.168.0.3为树莓派IP地址，我使用树莓派GPIO14连接继电器IN口，GPIO14编号为8）
（使用Shell、C控制GPIO可参考：&lt;a href="http://amosk.info/blog/archives/914"&gt;http://amosk.info/blog/archives/914&lt;/a&gt;，Python相对更简便一些）&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/usr/bin/python&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;BaseHTTPServer&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;BaseHTTPRequestHandler&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;HTTPServer&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nn"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nn"&gt;socket&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;RPi.GPIO&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;GPIO&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MyHandler&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BaseHTTPRequestHandler&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;do_GET&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_response&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_header&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;Content-type&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;text/html&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
       &lt;span class="err"&gt; &lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;end_headers&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="err"&gt;　　　　&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wfile&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;html&amp;gt;&amp;lt;body&amp;gt;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
 &lt;span class="err"&gt;　　　　&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wfile&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt; &amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&amp;lt;center&amp;gt;&amp;lt;h1&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;on&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wfile&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;a href=/off&amp;gt;&amp;lt;img src=http://imghost/on.png&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;br&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setmode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BOARD&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;８&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OUT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
            &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;８&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;HIGH&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
 &lt;span class="err"&gt;　　　　&lt;/span&gt;&lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;off&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
           &lt;span class="err"&gt; &lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wfile&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;a href=/on&amp;gt;&amp;lt;img src=http://imghost/off.png&amp;gt;&amp;lt;/a&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setmode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BOARD&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;８&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OUT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
            &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;８&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GPIO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LOW&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="err"&gt;＃&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;system&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bash set_led.sh 14 &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:])&lt;/span&gt;

&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;server&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HTTPServer&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;MyHandler&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setsockopt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SOL_SOCKET&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SO_REUSEADDR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;serve_forever&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;KeyboardInterrupt&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;server&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;演示视频（掩饰代码里，我添加了一个随机播放音乐的按钮，所以能听到音乐）：
&lt;a href="http://player.youku.com/player.php/sid/XNzAxNjM2MTEy/v.swf"&gt;http://player.youku.com/player.php/sid/XNzAxNjM2MTEy/v.swf&lt;/a&gt;&lt;/p&gt;</summary></entry><entry><title>Arduino vs. Raspberry Pi vs. 51单片机</title><link href="http://localhost:8000/programming/arduino-vs-raspberry-pi-vs-51e58d95e78987e69cba.html" rel="alternate"></link><updated>2014-04-17T14:10:23+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2014-04-17:programming/arduino-vs-raspberry-pi-vs-51e58d95e78987e69cba.html</id><summary type="html">&lt;p&gt;AT89c51 / STC89c51 单片机： &lt;a href="http://baike.baidu.com/link?url=WasrAY8rghKRSgR-6wsW_hvwnB4zx0w_Kgdecq0GbE_X1ya5MPGr895gvaCsgnHq2GkvRz-rj8KR8YRPRTXTyK"&gt;百科介绍&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;AT89c51必须使用编程器烧写程序，STC89c51则可以使用编程串口烧写&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;需要了解硬件结构和寄存器设置、指令较多&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;多数使用繁琐的汇编语言进行编程，效率底&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;成本在15元左右&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Arduino （阿尔杜伊诺）单片机：&lt;a href="http://baike.baidu.com/link?url=kYjgQ8tKZOwc0uohoErVjtueHlFpOiQfBI9KLVUNw-SnX8AaNdylb_-DsPbyBPt1TekLUTXhe63_uO2sMWARjq"&gt;百科介绍&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;支持串口、USB烧写程序&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;单片机一次智能运行烧写进去的一个程序&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;20 HZ 的 CPU、内存小&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;自带外设很少，需要添加额外接口板&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;只需掌握少量指令，使用C语言、官方库就可以开始操作硬件&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;软硬件都开放，有大量成熟的开源库课复用&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;比传统单片机有更多的资料（博客、网站、社区）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;成本在40元左右&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Raspberry Pi：&lt;a href="http://baike.baidu.com/link?url=jD_6S_OHvezJ-Ho5aJgpxmQWvfqOaOEsVlTRIktoQbcJSGUt2TF6pAFl8kjli7jljVneghknfL64lqOymL9pw_"&gt;百科介绍&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;有Linux操作系统、多进程/线程并发，单片机是单进程。同时启动关机过程耗时更多。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;更强CPU 700 HZ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;支持更多PC外设 （如：HDMI、USB、RJ45、SD读卡器等）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;不许要像单片机一样关心太多硬件细节&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;可以使用Linux标准系统调用，Python、Java等高级语言&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;可架设Web服务器，通过HTTP请求和手机客户端、浏览器等交互&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;稳定的以太网，单片机上要的TCP协议栈都是第三方实现，系统负载太大、且不稳定&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;比传统单片机和Arduino成本高、耗电量大&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;但单片机支持更多的传感器器件&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;更高的成本 380元左右&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;结论：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;没有最好的，只有最适合的，在适当的场合发挥各自的优势。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;需要更远距离的通信、控制，适合用数梅派上的通用以太网接口&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;简单的控制终端适合用单片机，成本低且使用蓝牙、无线实现更简单&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在不考虑成本情况下，更高级的平台，能够提高开发效率&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;单片机体积更小，易于电路整合&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary></entry><entry><title>使用lsof侦测程序句柄泄漏</title><link href="http://localhost:8000/programming/e4bdbfe794a8lsofe4bea6e6b58be7a88be5ba8fe58fa5e69f84e6b384e6bc8f.html" rel="alternate"></link><updated>2014-04-12T23:10:20+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2014-04-12:programming/e4bdbfe794a8lsofe4bea6e6b58be7a88be5ba8fe58fa5e69f84e6b384e6bc8f.html</id><summary type="html">&lt;p&gt;Unix/Linux 中一切皆文件，socket、设备、目录等都是用文件来表示，_进程_操作这些对象首先要打开文件，打开时返回一个整数文件句柄，句柄用于唯一标识进程和对象之间的连接关系。&lt;/p&gt;
&lt;p&gt;open文件的时候，会调用get_unused_id()来分配一个未被占用的文件描述符。&lt;/p&gt;
&lt;p&gt;有一次去SK公司玩，一起分析一个文件句柄泄漏。用 lsof 观察发现/tmp/目录下有大量文件没有被关闭，就删除了，造成句柄泄漏。单个进程句柄使用超过了（ulimit -n， 1024）的限制。 通过ulimit -n 2048扩大文件描述符数量限制并不能从根本解决问题。ulimit 还可以用来设置更多系统资源限制，比如内存core大小、进程数目等。&lt;/p&gt;
&lt;p&gt;由于这里的文件都是/tmp/目录下，所以很快想到是python程序当中零时文件创建操作引起的。grep后发现有三处使用了python temfile模块使用了零时文件，通过修改零时文件前缀可以定位具体出错位置。&lt;/p&gt;
&lt;p&gt;调试发现文件被open了两次，只有close一次。tempfile.mkstemp(prefix="tmp1_") 会返回一个文件句柄和临时文件路径，这个临时文件_已经被分配文件句柄_了！！&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;amos&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;amosk&lt;/span&gt; &lt;span class="n"&gt;devel&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;python&lt;/span&gt;
&lt;span class="n"&gt;Python&lt;/span&gt; &lt;span class="mf"&gt;2.7.5&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Feb&lt;/span&gt; &lt;span class="mi"&gt;19&lt;/span&gt; &lt;span class="mi"&gt;2014&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;47&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;GCC&lt;/span&gt; &lt;span class="mf"&gt;4.8.2&lt;/span&gt; &lt;span class="mi"&gt;20131212&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Red&lt;/span&gt; &lt;span class="n"&gt;Hat&lt;/span&gt; &lt;span class="mf"&gt;4.8.2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="n"&gt;linux2&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;or&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;import&lt;/span&gt; &lt;span class="n"&gt;tempfile&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;tempfile&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mkstemp&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmptcK5Fn&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;amos&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;amosk&lt;/span&gt; &lt;span class="n"&gt;devel&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;lsof&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmptcK5Fn&lt;/span&gt;
&lt;span class="n"&gt;COMMAND&lt;/span&gt;  &lt;span class="n"&gt;PID&lt;/span&gt; &lt;span class="n"&gt;USER&lt;/span&gt;   &lt;span class="n"&gt;FD&lt;/span&gt;   &lt;span class="n"&gt;TYPE&lt;/span&gt; &lt;span class="n"&gt;DEVICE&lt;/span&gt; &lt;span class="n"&gt;SIZE&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;OFF&lt;/span&gt;  &lt;span class="n"&gt;NODE&lt;/span&gt; &lt;span class="n"&gt;NAME&lt;/span&gt;
&lt;span class="n"&gt;python&lt;/span&gt;  &lt;span class="mi"&gt;5759&lt;/span&gt; &lt;span class="n"&gt;amos&lt;/span&gt;    &lt;span class="mi"&gt;3u&lt;/span&gt;   &lt;span class="n"&gt;REG&lt;/span&gt;   &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;74511&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmptcK5Fn&lt;/span&gt;
&lt;span class="cp"&gt;# 占用了文件句柄 3&lt;/span&gt;

&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmptcK5Fn&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;w&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;amos&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;amosk&lt;/span&gt; &lt;span class="n"&gt;devel&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;lsof&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmptcK5Fn&lt;/span&gt;
&lt;span class="n"&gt;COMMAND&lt;/span&gt;  &lt;span class="n"&gt;PID&lt;/span&gt; &lt;span class="n"&gt;USER&lt;/span&gt;   &lt;span class="n"&gt;FD&lt;/span&gt;   &lt;span class="n"&gt;TYPE&lt;/span&gt; &lt;span class="n"&gt;DEVICE&lt;/span&gt; &lt;span class="n"&gt;SIZE&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;OFF&lt;/span&gt;  &lt;span class="n"&gt;NODE&lt;/span&gt; &lt;span class="n"&gt;NAME&lt;/span&gt;
&lt;span class="n"&gt;python&lt;/span&gt;  &lt;span class="mi"&gt;5759&lt;/span&gt; &lt;span class="n"&gt;amos&lt;/span&gt;    &lt;span class="mi"&gt;3u&lt;/span&gt;   &lt;span class="n"&gt;REG&lt;/span&gt;   &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;74511&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmptcK5Fn&lt;/span&gt;
&lt;span class="n"&gt;python&lt;/span&gt;  &lt;span class="mi"&gt;5759&lt;/span&gt; &lt;span class="n"&gt;amos&lt;/span&gt;    &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;   &lt;span class="n"&gt;REG&lt;/span&gt;   &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;74511&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmptcK5Fn&lt;/span&gt;
&lt;span class="cp"&gt;# 两个文件句柄被占用 3，4&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;amos&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;amosk&lt;/span&gt; &lt;span class="n"&gt;devel&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;lsof&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmptcK5Fn&lt;/span&gt;
&lt;span class="n"&gt;COMMAND&lt;/span&gt;  &lt;span class="n"&gt;PID&lt;/span&gt; &lt;span class="n"&gt;USER&lt;/span&gt;   &lt;span class="n"&gt;FD&lt;/span&gt;   &lt;span class="n"&gt;TYPE&lt;/span&gt; &lt;span class="n"&gt;DEVICE&lt;/span&gt; &lt;span class="n"&gt;SIZE&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;OFF&lt;/span&gt;  &lt;span class="n"&gt;NODE&lt;/span&gt; &lt;span class="n"&gt;NAME&lt;/span&gt;
&lt;span class="n"&gt;python&lt;/span&gt;  &lt;span class="mi"&gt;5759&lt;/span&gt; &lt;span class="n"&gt;amos&lt;/span&gt;    &lt;span class="mi"&gt;3u&lt;/span&gt;   &lt;span class="n"&gt;REG&lt;/span&gt;   &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;74511&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmptcK5Fn&lt;/span&gt;
&lt;span class="cp"&gt;# close后文件句柄 3 还被占用&lt;/span&gt;

&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmptcK5Fn&lt;/span&gt;&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;amos&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;amosk&lt;/span&gt; &lt;span class="n"&gt;devel&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;lsof&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;grep&lt;/span&gt; &lt;span class="n"&gt;tmpmEt_pM&lt;/span&gt;
&lt;span class="n"&gt;python&lt;/span&gt;  &lt;span class="mi"&gt;12459&lt;/span&gt; &lt;span class="n"&gt;amos&lt;/span&gt;    &lt;span class="mi"&gt;3u&lt;/span&gt;   &lt;span class="n"&gt;REG&lt;/span&gt;               &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;  &lt;span class="mi"&gt;182528&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;tmpmEt_pM&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;deleted&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="cp"&gt;# 文件已被删除，但句柄未被释放&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;tempfile.mkstemp()
返回一个文件句柄，和文件路径，此时文件句柄已被分配。正确的使用方法是，通过os.fdopen()打开文件。&lt;/p&gt;
&lt;h1 id="1"&gt;正确使用方法1&lt;/h1&gt;
&lt;p&gt;fd,path = tempfile.mkstemp()
f = os.fdopen(fd, 'w')
f.close()&lt;/p&gt;
&lt;h1 id="2"&gt;正确使用方法2&lt;/h1&gt;
&lt;p&gt;fd,path = tempfile.mkstemp()
....
os.close(fd)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;tempfile.mktemp()
只返回一个唯一的临时文件路径，并不打开文件。只需要正常使用返回的路径打开使用关闭文件就行。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;tempfile.TemporaryFile() 返回一个类文件对象，用于临时数据保存（实际上对应磁盘上的一个临时文件）。当文件对象被close或者被del的时候，临时文件将从磁盘上删除。&lt;/p&gt;
&lt;p&gt;tempfile.TemporaryFile([mode='w+b'[, bufsize=-1[, suffix=''[, prefix='tmp'[, dir=None]]]]])&lt;/p&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;f = tempfile.TemporaryFile()&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;h1 id="lsof-tmptmpchvmut-deleted"&gt;用 lsof 查看，这个临时文件是被删除状态 /tmp/tmpchVMut (deleted)&lt;/h1&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;f.write("hellon")
f.seek(0) # 移动指针读取文件
f.read()
'hellon'
f.close() # 句柄被释放&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;</summary></entry><entry><title>FWD:[Qemu-devel] Thank You to our contributors</title><link href="http://localhost:8000/programming/fwdqemu-devel-thank-you-to-our-contributors.html" rel="alternate"></link><updated>2014-02-16T15:08:10+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2014-02-16:programming/fwdqemu-devel-thank-you-to-our-contributors.html</id><summary type="html">&lt;p&gt;Message-ID: &lt;a href="&amp;#109;&amp;#97;&amp;#105;&amp;#108;&amp;#116;&amp;#111;&amp;#58;&amp;#53;&amp;#50;&amp;#70;&amp;#69;&amp;#54;&amp;#50;&amp;#69;&amp;#57;&amp;#46;&amp;#53;&amp;#48;&amp;#53;&amp;#48;&amp;#49;&amp;#48;&amp;#55;&amp;#64;&amp;#115;&amp;#117;&amp;#115;&amp;#101;&amp;#46;&amp;#100;&amp;#101;"&gt;&amp;#53;&amp;#50;&amp;#70;&amp;#69;&amp;#54;&amp;#50;&amp;#69;&amp;#57;&amp;#46;&amp;#53;&amp;#48;&amp;#53;&amp;#48;&amp;#49;&amp;#48;&amp;#55;&amp;#64;&amp;#115;&amp;#117;&amp;#115;&amp;#101;&amp;#46;&amp;#100;&amp;#101;&lt;/a&gt;
Date: Fri, 14 Feb 2014 19:39:37 +0100
From: Andreas Färber &lt;a href="&amp;#109;&amp;#97;&amp;#105;&amp;#108;&amp;#116;&amp;#111;&amp;#58;&amp;#97;&amp;#102;&amp;#97;&amp;#101;&amp;#114;&amp;#98;&amp;#101;&amp;#114;&amp;#64;&amp;#115;&amp;#117;&amp;#115;&amp;#101;&amp;#46;&amp;#100;&amp;#101;"&gt;&amp;#97;&amp;#102;&amp;#97;&amp;#101;&amp;#114;&amp;#98;&amp;#101;&amp;#114;&amp;#64;&amp;#115;&amp;#117;&amp;#115;&amp;#101;&amp;#46;&amp;#100;&amp;#101;&lt;/a&gt;
Organization: SUSE LINUX Products GmbH
To: qemu-devel &lt;a href="&amp;#109;&amp;#97;&amp;#105;&amp;#108;&amp;#116;&amp;#111;&amp;#58;&amp;#113;&amp;#101;&amp;#109;&amp;#117;&amp;#45;&amp;#100;&amp;#101;&amp;#118;&amp;#101;&amp;#108;&amp;#64;&amp;#110;&amp;#111;&amp;#110;&amp;#103;&amp;#110;&amp;#117;&amp;#46;&amp;#111;&amp;#114;&amp;#103;"&gt;&amp;#113;&amp;#101;&amp;#109;&amp;#117;&amp;#45;&amp;#100;&amp;#101;&amp;#118;&amp;#101;&amp;#108;&amp;#64;&amp;#110;&amp;#111;&amp;#110;&amp;#103;&amp;#110;&amp;#117;&amp;#46;&amp;#111;&amp;#114;&amp;#103;&lt;/a&gt;
Cc: qemu-trivial &lt;a href="&amp;#109;&amp;#97;&amp;#105;&amp;#108;&amp;#116;&amp;#111;&amp;#58;&amp;#113;&amp;#101;&amp;#109;&amp;#117;&amp;#45;&amp;#116;&amp;#114;&amp;#105;&amp;#118;&amp;#105;&amp;#97;&amp;#108;&amp;#64;&amp;#110;&amp;#111;&amp;#110;&amp;#103;&amp;#110;&amp;#117;&amp;#46;&amp;#111;&amp;#114;&amp;#103;"&gt;&amp;#113;&amp;#101;&amp;#109;&amp;#117;&amp;#45;&amp;#116;&amp;#114;&amp;#105;&amp;#118;&amp;#105;&amp;#97;&amp;#108;&amp;#64;&amp;#110;&amp;#111;&amp;#110;&amp;#103;&amp;#110;&amp;#117;&amp;#46;&amp;#111;&amp;#114;&amp;#103;&lt;/a&gt;, qemu-ppc &lt;a href="&amp;#109;&amp;#97;&amp;#105;&amp;#108;&amp;#116;&amp;#111;&amp;#58;&amp;#113;&amp;#101;&amp;#109;&amp;#117;&amp;#45;&amp;#112;&amp;#112;&amp;#99;&amp;#64;&amp;#110;&amp;#111;&amp;#110;&amp;#103;&amp;#110;&amp;#117;&amp;#46;&amp;#111;&amp;#114;&amp;#103;"&gt;&amp;#113;&amp;#101;&amp;#109;&amp;#117;&amp;#45;&amp;#112;&amp;#112;&amp;#99;&amp;#64;&amp;#110;&amp;#111;&amp;#110;&amp;#103;&amp;#110;&amp;#117;&amp;#46;&amp;#111;&amp;#114;&amp;#103;&lt;/a&gt;,
qemu-stable &lt;a href="&amp;#109;&amp;#97;&amp;#105;&amp;#108;&amp;#116;&amp;#111;&amp;#58;&amp;#113;&amp;#101;&amp;#109;&amp;#117;&amp;#45;&amp;#115;&amp;#116;&amp;#97;&amp;#98;&amp;#108;&amp;#101;&amp;#64;&amp;#110;&amp;#111;&amp;#110;&amp;#103;&amp;#110;&amp;#117;&amp;#46;&amp;#111;&amp;#114;&amp;#103;"&gt;&amp;#113;&amp;#101;&amp;#109;&amp;#117;&amp;#45;&amp;#115;&amp;#116;&amp;#97;&amp;#98;&amp;#108;&amp;#101;&amp;#64;&amp;#110;&amp;#111;&amp;#110;&amp;#103;&amp;#110;&amp;#117;&amp;#46;&amp;#111;&amp;#114;&amp;#103;&lt;/a&gt;
Subject: [Qemu-devel] Thank You to our contributors
List-Id: &lt;qemu-devel.nongnu.org&gt;&lt;/p&gt;
&lt;p&gt;Hello,&lt;/p&gt;
&lt;p&gt;I'd like to use #ilovefs day [1] to say a big Thank You to all QEMU
contributors. Especially all that don't work on QEMU as their main job
but still take the time to send in occasional bug fixes or to implement
cool new features.&lt;/p&gt;
&lt;p&gt;QEMU has grown from a hobby project of a small group of people to a
de-facto standard in Open Source emulation; in particular virtualization
in the enterprise requiring a robust out-of-the-box solution on one
hand, and as an Open Source project allowing customizable cores and
boards for the embedded industry on the other, appear to have largely
contributed to that success. For a fact there has been a large increase
in mailing list volume over time [2], so bear with us and the processes
we have put in place to help handle this; your contributions are truly
appreciated!
And if patches appear to fall through the cracks, don't be discouraged
and remind us, so that we can figure out some solution and make QEMU
suitable for use cases we might have not yet run into or thought of
ourselves.&lt;/p&gt;
&lt;p&gt;If you're not a contributor yet but still like our Free Software as is,
feel encouraged to share your appreciation in your blog, on social media
or in a talk, sharing with the world how QEMU helps you. :-)&lt;/p&gt;
&lt;p&gt;Best regards,
Andreas&lt;/p&gt;
&lt;p&gt;[1] http://fsfe.org/campaigns/ilovefs/2014/ilovefs.en.html
[2] http://gmane.org/plot-rate.php?group=3Dgmane.comp.emulators.qemu
--
SUSE LINUX Products GmbH&lt;/p&gt;</summary></entry><entry><title>使用RaspberryPi 的GPIO接口控制LED灯闪烁</title><link href="http://localhost:8000/programming/raspberry-pi.html" rel="alternate"></link><updated>2013-06-09T03:08:43+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2013-06-09:programming/raspberry-pi.html</id><summary type="html">&lt;p&gt;数梅派入门设置：&lt;a href="http://my.oschina.net/quanpower/blog/105247"&gt;http://my.oschina.net/quanpower/blog/105247&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下面的 Shell 和 C 代码，都是先了通过控制GPIO针的高低电频，闪烁LED灯。可以结合其他程序来做消息提醒。Shell中使用的针号是GPIO的编号，如 GPIO11 对应 11。但C代码中需要传递broadcom编排的ID，GPIO11对应broadcom的 0。&lt;/p&gt;
&lt;p&gt;GPIO23-&amp;gt;4, GPIO11-&amp;gt;14, GPIO24-&amp;gt;5, GPIO17-&amp;gt;0,....&lt;/p&gt;
&lt;p&gt;&lt;a href="http://"&gt;&lt;img alt="shumei" src="http://amosk.info/blog/wp-content/uploads/2013/06/shumei.png" /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="电路图" src="http://img.bianbian.me/blog/201207/ledtest.png" /&gt;&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/bin/bash&lt;/span&gt;
&lt;span class="c"&gt;# usage: bash led.sh $perid $repeat $pin&lt;/span&gt;

&lt;span class="k"&gt;function &lt;/span&gt;set_led&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="nv"&gt;perid&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;
    &lt;span class="nv"&gt;repeat&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;
    &lt;span class="nv"&gt;pin&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$3&lt;/span&gt;

    &lt;span class="nb"&gt;cd&lt;/span&gt; /sys/class/gpio/
    &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$pin&lt;/span&gt; &amp;gt; &lt;span class="nb"&gt;export&lt;/span&gt;    &lt;span class="c"&gt;#将对应pin的操作暴露再sys文件系统下&lt;/span&gt;
    &lt;span class="nb"&gt;echo &lt;/span&gt;out &amp;gt; gpio&lt;span class="nv"&gt;$pin&lt;/span&gt;/direction &lt;span class="c"&gt;#控制电流走向，这里需要高电频的时候，电流流向接地线，从而LED发光，所以设置为out&lt;/span&gt;

    &lt;span class="k"&gt;for &lt;/span&gt;i in &lt;span class="sb"&gt;`&lt;/span&gt;seq &lt;span class="nv"&gt;$repeat&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;;&lt;span class="k"&gt;do&lt;/span&gt;
&lt;span class="k"&gt;        &lt;/span&gt;&lt;span class="nb"&gt;echo &lt;/span&gt;1 &amp;gt; gpio&lt;span class="nv"&gt;$pin&lt;/span&gt;/value &lt;span class="c"&gt;#设置高电频，点亮LED&lt;/span&gt;
        sleep &lt;span class="nv"&gt;$perid&lt;/span&gt;
        &lt;span class="nb"&gt;echo &lt;/span&gt;0 &amp;gt; gpio&lt;span class="nv"&gt;$pin&lt;/span&gt;/value &lt;span class="c"&gt;#设置底电频，关闭LED&lt;/span&gt;
        sleep &lt;span class="nv"&gt;$perid&lt;/span&gt;
    &lt;span class="k"&gt;done&lt;/span&gt;
&lt;span class="k"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$pin&lt;/span&gt; &amp;gt; unexport
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$# &lt;/span&gt;-eq 3 &lt;span class="o"&gt;]&lt;/span&gt;; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="k"&gt;    &lt;/span&gt;set_led &lt;span class="nv"&gt;$1&lt;/span&gt; &lt;span class="nv"&gt;$2&lt;/span&gt; &lt;span class="nv"&gt;$3&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;





&lt;span class="c"&gt;#include &amp;lt;wiringpi.h&amp;gt;&lt;/span&gt;
&lt;span class="c"&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/span&gt;
&lt;span class="c"&gt;#include &amp;lt;stdlib.h&amp;gt;&lt;/span&gt;

/*
 * compile: apt-get install i2c-tools libi2c-dev python-smbus
 *          gcc led.c -o led -lwiringPi
 * usage ./led &lt;span class="nv"&gt;$perid&lt;/span&gt; &lt;span class="nv"&gt;$repeat&lt;/span&gt; &lt;span class="nv"&gt;$pin&lt;/span&gt;
*/

void set_led&lt;span class="o"&gt;(&lt;/span&gt;int pin, int status&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    pinMode &lt;span class="o"&gt;(&lt;/span&gt;pin, OUTPUT&lt;span class="o"&gt;)&lt;/span&gt;; //设置输出模式
    digitalWrite &lt;span class="o"&gt;(&lt;/span&gt;pin, status&lt;span class="o"&gt;)&lt;/span&gt;;
&lt;span class="o"&gt;}&lt;/span&gt;

void blink&lt;span class="o"&gt;(&lt;/span&gt;int pin, int perid, int repeat&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;repeat--&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="o"&gt;{&lt;/span&gt;
        set_led&lt;span class="o"&gt;(&lt;/span&gt;pin, 1&lt;span class="o"&gt;)&lt;/span&gt;; //设置高电频
        delay&lt;span class="o"&gt;(&lt;/span&gt;perid&lt;span class="o"&gt;)&lt;/span&gt;;
        set_led&lt;span class="o"&gt;(&lt;/span&gt;pin, 0&lt;span class="o"&gt;)&lt;/span&gt;; //设置底电频
        delay&lt;span class="o"&gt;(&lt;/span&gt;perid&lt;span class="o"&gt;)&lt;/span&gt;;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

int main &lt;span class="o"&gt;(&lt;/span&gt;int argc, char *argv&lt;span class="o"&gt;[])&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
    int &lt;span class="nv"&gt;pin_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 0;
    int &lt;span class="nv"&gt;perid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 100;
    int &lt;span class="nv"&gt;repeat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 1;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;argc &amp;gt; 1&lt;span class="o"&gt;)&lt;/span&gt;
        &lt;span class="nv"&gt;perid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; atoi &lt;span class="o"&gt;(&lt;/span&gt;argv&lt;span class="o"&gt;[&lt;/span&gt;1&lt;span class="o"&gt;])&lt;/span&gt;;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;argc &amp;gt; 2&lt;span class="o"&gt;)&lt;/span&gt;
        &lt;span class="nv"&gt;repeat&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; atoi &lt;span class="o"&gt;(&lt;/span&gt;argv&lt;span class="o"&gt;[&lt;/span&gt;2&lt;span class="o"&gt;])&lt;/span&gt;;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;argc &amp;gt; 3&lt;span class="o"&gt;)&lt;/span&gt;
        &lt;span class="nv"&gt;pin_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; atoi &lt;span class="o"&gt;(&lt;/span&gt;argv&lt;span class="o"&gt;[&lt;/span&gt;3&lt;span class="o"&gt;])&lt;/span&gt;;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;-1 &lt;span class="o"&gt;==&lt;/span&gt; wiringPiSetup&lt;span class="o"&gt;())&lt;/span&gt;
    &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Setup wiringPi failed!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;;
        &lt;span class="k"&gt;return &lt;/span&gt;1;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;blink pin(%d) for %d times (perid:%d)\n&amp;quot;&lt;/span&gt;,
        pin_num, repeat, perid&lt;span class="o"&gt;)&lt;/span&gt;;
    blink &lt;span class="o"&gt;(&lt;/span&gt;pin_num, perid, repeat&lt;span class="o"&gt;)&lt;/span&gt;;

    &lt;span class="k"&gt;return &lt;/span&gt;0;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</summary></entry><entry><title>'BIOS: 系统Reset的方法和差异性'</title><link href="http://localhost:8000/programming/e7b3bbe7bb9fresete79a84e696b9e6b395e5928ce5b7aee5bc82e680a7.html" rel="alternate"></link><updated>2012-12-27T05:12:01+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2012-12-27:programming/e7b3bbe7bb9fresete79a84e696b9e6b395e5928ce5b7aee5bc82e680a7.html</id><summary type="html">&lt;p&gt;BIOS有三种RESET 的方法: KBC RESET、PORT92、0xCF9，方法如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;KBC Reset
对 KBC(0x60/0x64 port) 写入 0xFE 指令。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;port 0xCF9 Reset
对 0xCF9 port 写入 0x06、0x0E 指令 (在chipset spec会定义其 Bit 設起時，Reset不同之處).
Bit 1 决定是否作 Reset.
Bit 2 决定 software reset OR hardware reset
Bit 3 决定是否 Reset S3、S4、S5 state
所以 0x06 和0 x0E 都是hardware reset.&lt;/p&gt;
&lt;h1 id="cat-homedevelworkingresetpy-example-to-reboot-system-by-amos-kong"&gt;cat /home/devel/working/reset.py (example to reboot system) By (Amos Kong)&lt;/h1&gt;
&lt;p&gt;import commands&lt;/p&gt;
&lt;p&gt;def outb(data, port):
    print "outb(0x%x, 0x%x)" % (port, data)
    outb_cmd = ("echo -e '\%s' | dd of=/dev/port seek=%d bs=1 count=1" %
                (oct(data), port))
    print outb_cmd
    commands.getoutput(outb_cmd)&lt;/p&gt;
&lt;p&gt;outb(0x06, 0xcf9)
outb(0x0E, 0xcf9)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;port 0x92 (System Control Port A) Reset
对 0x92 port 的Bit 0 设置1，发出 INIT# 对 16 PCI clocks，CPU进行初始化&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;以上(1)和(3)都是做Software Reset，(2)可以做Software Reset、Hardware Reset、Global Reset. Global Reset是针对 power loss 的情況下做的完整的chipset Reset (发生情況: A global reset will occur after 4 seconds if an acknowledge from the processor is not received.)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;补充: software reset、hardware reset、warm boot、cold boot的定做和定义&lt;/li&gt;
&lt;li&gt;Software Reset: activating INIT# for 16 PCI clocks.(只对CPU做Reset)&lt;/li&gt;
&lt;li&gt;Hardware Reset: hardware reset by activating PLTRST# and SUS_STAT# active for a minimum of about 1 milliseconds. (对CPU和大部分的Chipset做Reset)&lt;/li&gt;
&lt;li&gt;Warm Boot: 在UEFI BIOS中是下 Software Reset的动作。在DOS按Ctrl+ALT+DEL就是warm boot.&lt;/li&gt;
&lt;li&gt;Cold Boot: 在ACPI spec可以查到cold boot定义为从 G3(mechanical off)、S5(G2)、S4 开机都算是cold boot.&lt;/li&gt;
&lt;/ul&gt;</summary></entry><entry><title>快速使用PIL转换照片生成预览网页</title><link href="http://localhost:8000/programming/e5bfabe9809fe4bdbfe794a8pile8bdace68da2e785a7e78987e7949fe68890e9a284e8a788e7bd91e9a1b5.html" rel="alternate"></link><updated>2011-11-01T07:25:02+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2011-11-01:programming/e5bfabe9809fe4bdbfe794a8pile8bdace68da2e785a7e78987e7949fe68890e9a284e8a788e7bd91e9a1b5.html</id><summary type="html">&lt;p&gt;我们常常用很多照片，需要快速通过http服务器分享，下面这个脚本，用PIL(python image library)转换固定大小的缩略图，并生成一个简易的html文件，附带的链接可以用于点击察看大图片。递归目录、其他格式什么懒的支持了，这个够用了 :-)&lt;/p&gt;
&lt;p&gt;$ cat resize.py&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="nx"&gt;os&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;Image&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;Resize&lt;/span&gt; &lt;span class="nx"&gt;jpg&lt;/span&gt; &lt;span class="n"&gt;files&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nx"&gt;current&lt;/span&gt; &lt;span class="nx"&gt;directory&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="nx"&gt;generate&lt;/span&gt; &lt;span class="nx"&gt;an&lt;/span&gt; &lt;span class="nx"&gt;html&lt;/span&gt; &lt;span class="nb"&gt;file&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; 
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="nx"&gt;present&lt;/span&gt; &lt;span class="n"&gt;pictures&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="nx"&gt;a&lt;/span&gt; &lt;span class="nx"&gt;light&lt;/span&gt; &lt;span class="nx"&gt;way.&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="nx"&gt;cd&lt;/span&gt; &lt;span class="nx"&gt;picture&lt;/span&gt;&lt;span class="na"&gt;-dir&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="nx"&gt;python&lt;/span&gt; &lt;span class="nx"&gt;resize.py&lt;/span&gt;
&lt;span class="err"&gt;#&lt;/span&gt; &lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="nx"&gt;firefox&lt;/span&gt; &lt;span class="nx"&gt;index.html&lt;/span&gt;

&lt;span class="nx"&gt;def&lt;/span&gt; &lt;span class="nx"&gt;resize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;width&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;512&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;img&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;Image.open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;img.size&lt;/span&gt;
    &lt;span class="n"&gt;new&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;img.resize&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="nb"&gt;width&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;width&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nb"&gt;size&lt;/span&gt;&lt;span class="err"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt; / size&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;))
    new.save(&amp;quot;.%s&amp;quot; % filename)

f = open(&amp;quot;index.html&amp;quot;, &amp;quot;w&amp;quot;)
f.write(&amp;quot;&lt;span class="nt"&gt;&amp;lt;center&amp;gt;&amp;lt;big&amp;gt;&lt;/span&gt;Click to review big pictures&lt;span class="nt"&gt;&amp;lt;/big&amp;gt;&amp;lt;/center&amp;gt;&lt;/span&gt;&amp;quot;)
files = os.listdir(&amp;quot;.&amp;quot;)
files.sort()
for i in files:
    if (i&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;==&amp;quot;.JPG&amp;quot; or i&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;==&amp;quot;.jpg&amp;quot;) and i&lt;span class="cp"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="cp"&gt;]&lt;/span&gt;!=&amp;#39;.&amp;#39;:
        resize(i, 200)
        f.write(&amp;quot;&lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%s&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;.%s&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;\n&amp;quot; % (i, i))
        f.flush()
f.close()
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="/blog/wp-content/uploads/resize-pic-script.png" src="/blog/wp-content/uploads/resize-pic-script.png" /&gt;&lt;/p&gt;</summary></entry><entry><title>关于 Erlang</title><link href="http://localhost:8000/programming/e585b3e4ba8e-erlang.html" rel="alternate"></link><updated>2011-04-09T05:36:18+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2011-04-09:programming/e585b3e4ba8e-erlang.html</id><summary type="html">&lt;p&gt;erlang 是一门内建支持并发的编程语言，起初是为开发通讯系统设计的，1998年开放源码，适合于构建分布式、实时软并行计算系统。erlang的分布式机制是透明的，程序并不知道&lt;/p&gt;
&lt;p&gt;自己是分布式运行，所以编写分布式应用更简单些。&lt;/p&gt;
&lt;p&gt;有人称erlang是OS中的OS，并且是自举的，少量核心代码是C实现的。&lt;/p&gt;
&lt;p&gt;erlang运行是启动许多轻量级进程，进程间通过消息机制进行通信，不共享内存/变量，所以不存在同步问题。erlang进程可被映射到主机进程或线程，甚至是多台几期的多个进程/&amp;gt;线程。erlang调度不同机器上的进程是在传输层之上，考虑到安全问题，需要对通信进行加密(如ssl)。这里的网络也是依靠OTP(Open Telecom Platform)提供，所以损耗系统资源较小。OPT是一个基于erlang的高并发开发环境。&lt;/p&gt;
&lt;p&gt;在云计算中，每个虚拟机就是一个具备执行能力的结点，可以利用erlang的并发机制，将执行任务分布到不同的虚拟机上，使用消息机制进行通信。&lt;/p&gt;
&lt;p&gt;erlang语法很怪异，不管是变量赋值、循环实现、函数执行流程等。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="o"&gt;--&lt;/span&gt; &lt;span class="n"&gt;hello&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;erl&lt;/span&gt; &lt;span class="o"&gt;----------------------------&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hello&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;export&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;hello&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]).&lt;/span&gt;

&lt;span class="n"&gt;hello&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;
    &lt;span class="nl"&gt;io:&lt;/span&gt;&lt;span class="n"&gt;fwrite&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hello, World!∼n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[]).&lt;/span&gt;
&lt;span class="o"&gt;--&lt;/span&gt; &lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;execute&lt;/span&gt;  &lt;span class="o"&gt;--------------------&lt;/span&gt;
&lt;span class="nl"&gt;ekmac:&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt; &lt;span class="n"&gt;ek&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;erl&lt;/span&gt;
&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hello.erl&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;ok&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;hello&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;hello&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;hello&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;
&lt;span class="n"&gt;Hello&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;World&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;
&lt;span class="n"&gt;ok&lt;/span&gt;
&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="n"&gt;stop&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;
&lt;span class="n"&gt;ok&lt;/span&gt;
&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;ekmac&lt;/span&gt;&lt;span class="o"&gt;:~&lt;/span&gt; &lt;span class="n"&gt;ek&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;推荐基本书、链接：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;erlang&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;
&lt;span class="n"&gt;erlang&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;china&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;
&lt;span class="n"&gt;docs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;huihoo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;erlang&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;span class="n"&gt;Thinking&lt;/span&gt; &lt;span class="n"&gt;in&lt;/span&gt; &lt;span class="n"&gt;erlang&lt;/span&gt;
&lt;span class="n"&gt;Programming&lt;/span&gt; &lt;span class="n"&gt;erlang&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="err"&gt;详读）&lt;/span&gt;
&lt;span class="n"&gt;erlang&lt;/span&gt;&lt;span class="err"&gt;程序学习笔记&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>简单抽奖程序</title><link href="http://localhost:8000/programming/e7ae80e58d95e68abde5a596e7a88be5ba8f.html" rel="alternate"></link><updated>2009-12-13T04:18:57+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2009-12-13:programming/e7ae80e58d95e68abde5a596e7a88be5ba8f.html</id><summary type="html">&lt;p&gt;昨天参加技术沙龙有一些礼品发放环节，就写了个简单的抽奖程序。&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="sd"&gt;Filename: lottery.py&lt;/span&gt;
&lt;span class="sd"&gt;Description: a programme for allocate lottery&lt;/span&gt;
&lt;span class="sd"&gt;Author: Amos Kong&lt;/span&gt;
&lt;span class="sd"&gt;Date: Dec 12, 2009&lt;/span&gt;
&lt;span class="sd"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;random&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;

&lt;span class="c"&gt;# Configure parameter&lt;/span&gt;
&lt;span class="n"&gt;num_person&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt;  &lt;span class="c"&gt;# Number of total persons&lt;/span&gt;
&lt;span class="n"&gt;num_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;        &lt;span class="c"&gt;# Number of 1th prize&lt;/span&gt;
&lt;span class="n"&gt;num_2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;        &lt;span class="c"&gt;# Number of 2nd prize&lt;/span&gt;
&lt;span class="n"&gt;num_3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;        &lt;span class="c"&gt;# Number of 3rd prize&lt;/span&gt;
&lt;span class="n"&gt;num_all&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;num_1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num_2&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num_3&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_result&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Random&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sample&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;xrange&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;num_person&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;num_all&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;1. &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;num_1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;2. &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;num_1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;num_1&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;num_2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;3. &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;num_1&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;num_2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;num_all&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;


&lt;span class="c"&gt;# Main&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s"&gt;&amp;#39;-h&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;lottery [-h] [num_person]&amp;quot;&lt;/span&gt;
        &lt;span class="nb"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;num_person&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;num_all&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;num_person&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;num_person should less than &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;num_all&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;lottery [-h] [num_person]&amp;quot;&lt;/span&gt;
    &lt;span class="nb"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;get_result&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;</summary></entry><entry><title>'[转]网络广播风暴'</title><link href="http://localhost:8000/programming/e8bdace7bd91e7bb9ce5b9bfe692ade9a38ee69ab4.html" rel="alternate"></link><updated>2009-07-28T07:44:51+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2009-07-28:programming/e8bdace7bd91e7bb9ce5b9bfe692ade9a38ee69ab4.html</id><summary type="html">&lt;p&gt;网吧行业竞争的加剧，出现了一些规模比较大的网吧。目前在网吧行业内，百台以上的网吧已经随处可见了。由于网吧在进行网络建设时，缺乏专业的网络技术支 持，使得网吧的网络故障频繁出现。在网吧的网络故障中，由于网络广播风暴引起的网络故障，占网吧网络故障的九成以上。网络广播风暴到底是如何形成的呢？
要想正确理解广播风暴的具体含义，我们必须了解一下工作在网络中的网络设备的工作原理。目前，工作在网吧网络中的网络设备，基本上都是交换机了。对于交换机，大家并没有真正的了解其工作原理。&lt;/p&gt;
&lt;p&gt;一、交换机基础知识&lt;/p&gt;
&lt;p&gt;1、交换机的定义：交换机是一种基于MAC（网卡的硬件地址）识别，能完成封装转发数据包功能的网络设备。交换机可以“学习”MAC地址，并把其存放在内 部地址表中，通过在数据帧的始发者和目标接收者之间建立临时的交换路径，使数据帧直接由源地址到达目的地址。
现在，交换机已经替代了我们原来比较熟悉的网络设备集线器，又称Hub。但是这并不意味着，我们不需要了解Hub的基本知识。
2、集线器的定义：集线器（HUB）属于数据通信系统中的基础设备，它和双绞线等传输介质一样，是一种不需任何软件支持或只需很少管理软件管理的硬件设 备。它被广泛应用到各种场合。集线器工作在局域网(LAN)环境，像网卡一样，应用于OSI参考模型第一层，因此又被称为物理层设备。集线器内部采用了电 器互联，当维护LAN的环境是逻辑总线或环型结构时，完全可以用集线器建立一个物理上的星型或树型网络结构。在这方面，集线器所起的作用相当于多端口的中 继器。其实，集线器实际上就是中继器的一种，其区别仅在于集线器能够提供更多的端口服务，所以集线器又叫多口中继器。&lt;/p&gt;
&lt;p&gt;二、交换机与集线器的区别&lt;/p&gt;
&lt;p&gt;现在，我们经常会存在这样一个技术误区，我们用的是交换机，数据全部是点对点转发的，为什么还会产生广播风暴呢？我们在充分了解了交换机与集线器的功能区别后，就会明白，使用交换机作为网络设备的网络，为什么会出现广播风暴。&lt;/p&gt;
&lt;p&gt;1、交换机与集线器的本质区别：用集线器组成的网络称为共享式网络，而用交换机组成的网络称为交换式网络。
共享式以太网存 在的主要问题是所有用户共享带宽，每个用户的实际可用带宽随网络用户数的增加而递减。这是因为当信息繁忙时，多个用户可能同时“争用”一个信道，而一个信 道在某一时刻只允许一个用户占用，所以大量的用户经常处于监测等待状态，致使信号传输时产生抖动、停滞或失真，严重影响了网络的性能。
2、 在交换式以太网中，交换机提供给每个用户专用的信息通道，除非两个源端口企图同时将信息发往同一个目的端口，否则多个源端口与目的端口之间可同时进行通信 而不会发生冲突。通过实验测得，在多服务器组成的LAN 中，处于半双工模式下的交换式以太网的实际最大传输速度是共享式网络的1.7倍，而工作在全双工状态下的交换式以太网的实际最大传输速度可达到共享式网络 的3.8倍。
交换机只是在工作方式上与集线器不同，其他的如连接方式、速度选择等与集线器基本相同，目前的交换机同样从速度上分 为10M、100M和1000M几种，所提供的端口数多为8口、16口和24口几种。交换机在局域网中主要用于连接工作站、Hub、服务器或用于分散式主 干网。&lt;/p&gt;
&lt;p&gt;三、产生广播风暴的原因&lt;/p&gt;
&lt;p&gt;通过对以上网络设备的了解，我们就可以简单分析出来，网络产生广播风暴的原因了。一般情况下，产生网络广播风暴的原因，主要有以下几种：&lt;/p&gt;
&lt;p&gt;1、网络设备原因：我们经常会有这样一个误区，交换机是点对点转发，不会产生广播风暴。在我们购买网络设置时，购买的交换机，通常是智能型的Hub，却被奸商当做交换机来卖。这样，在网络稍微繁忙的时候，肯定会产生广播风暴了。
2、网卡损坏：如果网络机器的网卡损坏，也同样会产生广播风暴。损坏的网卡，不停向交换机发送大量的数据包，产生了大量无用的数据包，产生了广播风暴。由 于网卡物理损坏引起的广播风暴，故障比较难排除，由于损坏的网卡一般还能上网，我们一般借用Sniffer局域网管理软件，查看网络数据流量，来判断故障 点的位置。
3、网络环路：曾经在一次的网络故障排除中，发现一个很可笑的错误，一条双绞线，两端插在同一个交换机的不同商品上，导致了网络性能急骤下降，打开网页都 非常困难。这种故障，就是典型的网络环路。网络环路的产生，一般是由于一条物理网络线路的两端，同时接在了一台网络设备中。
4、网络病毒：目前，一些比较流行的网络病毒，Funlove、震荡波、RPC等病毒，一旦有机器中毒后，会立即通过网络进行传播。网络病毒的传播，就会损耗大量的网络带宽，引起网络堵塞，引起广播风暴。
5、黑客软件的使用：目前，一些上网者，经常利用网络执法官、网络剪刀手等黑客软件，对网吧的内部网络进行攻击，由于这些软件的使用，网络也可能会引起广播风暴。&lt;/p&gt;
&lt;p&gt;附注：&lt;/p&gt;
&lt;p&gt;广播风暴是一种在网上广播的消息导致大量响应，每个响应又导致大量响应的状态。严重的广播风 暴可能封锁所有网络通讯量，导致网络灾难。一般HUB的工作方式是广播式，比如如果一台主机要向另一台主机发送文件，HUB会把这些信息发送到每个端口， 由网卡来决定是否接收，这就是广播。而交换机是端口到端口式，广播的作用主要是确定其它主机的位置和联系。现在一般采用VLAN来控制广播风暴的出现。 VLAN的优势在于VLAN内部的广播和单播流量不会被转发到其它VLAN中，从而有助于控制网络流量、减少设备投资、简化网络管理、提高网络安全性。&lt;/p&gt;</summary></entry><entry><title>网页Email地址抓取脚本</title><link href="http://localhost:8000/programming/e7bd91e9a1b5emaile59cb0e59d80e68a93e58f96e8849ae69cac.html" rel="alternate"></link><updated>2009-04-11T08:55:35+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2009-04-11:programming/e7bd91e9a1b5emaile59cb0e59d80e68a93e58f96e8849ae69cac.html</id><summary type="html">&lt;p&gt;今天帮你同学写了个shell脚本，抓取指定url地址的网页中的email地址。 这里字符编码转换还有点问题，只是考虑了gb2312一种情况。最好是从html源码截取字符编码，进行转换。&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/bin/bash&lt;/span&gt;
&lt;span class="c"&gt;# test page: http://zhidao.baidu.com/question/21631338.html&lt;/span&gt;

&lt;span class="nv"&gt;f&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;.tmp.txt&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;f2&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;.tmp2.txt&amp;quot;&lt;/span&gt;

wget &lt;span class="nv"&gt;$1&lt;/span&gt; -O &lt;span class="nv"&gt;$f2&lt;/span&gt; &amp;gt;/dev/null 2&amp;gt;/dev/null
iconv -f gb2312 -t utf-8 &lt;span class="nv"&gt;$f2&lt;/span&gt; &amp;gt; &lt;span class="nv"&gt;$f&lt;/span&gt; 2&amp;gt;/dev/null

sed -i -e &lt;span class="s1"&gt;&amp;#39;s/]*&amp;gt;//g;/&amp;lt;!--/d&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;$f&lt;/span&gt;
sed -i -e &lt;span class="s1"&gt;&amp;#39;s/ //g;s/°C//g;s/^\s*//g;/^$/d&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;$f&lt;/span&gt;

sed -e &lt;span class="s2"&gt;&amp;quot;s/[^\-\.+_a-zA-Z0-9@]/\n/g&amp;quot;&lt;/span&gt; &lt;span class="nv"&gt;$f&lt;/span&gt; |grep @|grep ^&lt;span class="o"&gt;[&lt;/span&gt;a-zA-Z0-9&lt;span class="o"&gt;]&lt;/span&gt;|grep &lt;span class="o"&gt;[&lt;/span&gt;a-zA-Z0-9&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;|sort -u | tee
rm -rf &lt;span class="nv"&gt;$f&lt;/span&gt; &lt;span class="nv"&gt;$f2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;运行效果：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;kongove&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;ubuntu&lt;/span&gt;&lt;span class="o"&gt;:~&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sh&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//zhidao.baidu.com/question/21631338.html&lt;/span&gt;
&lt;span class="n"&gt;aizi66742112&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;hainan&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;net&lt;/span&gt;
&lt;span class="n"&gt;alading512&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;sina&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
&lt;span class="n"&gt;bingbing43&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
&lt;span class="n"&gt;caoyingtj&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
&lt;span class="n"&gt;chenq&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;chinabyte&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
&lt;span class="n"&gt;dnzb&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;pub2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;qz&lt;/span&gt;
&lt;span class="n"&gt;duanxiaosong&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;ah163&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
&lt;span class="n"&gt;gxlworld&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="mf"&gt;163.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
&lt;span class="n"&gt;halfmay2691&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;sina&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;
&lt;span class="n"&gt;hbx&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;wxjt&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;com&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cn&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>参加OpenSourceCamp 09'西安</title><link href="http://localhost:8000/programming/e58f82e58aa0opensourcecamp-09e8a5bfe5ae89-2.html" rel="alternate"></link><updated>2009-03-28T13:06:53+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2009-03-28:programming/e58f82e58aa0opensourcecamp-09e8a5bfe5ae89-2.html</id><summary type="html">&lt;p&gt;今天和陈老师、张斌等六个人一块去参加了这个活动，第一次参加这种unconference形式的聚会，有很多东西值得借鉴，环境不错，是在一个咖啡厅。由于演讲主题由大家选举产生，而且有多个选择，这样能保证自己听的主题是最喜欢的，而且每个参与聚会的人都可以发表主题，有机会给大家讲。比起以往的传统讲座，增强了听众于演讲者之间的交流，形式更灵活。
今天去的多数是企业的人，学生很少也就五六个吧。开始大家举手选出了四个最感兴趣的话题，一是如何平衡工作与生活，二是开源在企业的应用，三是When junit does not work，四是Groovy方面的。分两个时段进行，我们参与的是第二个和第四个。
开源在企业的应用讲了一些法律许可、集成开发、开源咨询等方面的东西，只是感觉离自己有点远。下来是北京ThoughtWork的一个咨询师胡凯讲单元测试，讲了junit、aunit单元测试方面的东西，像创造测试环境、调用测试方法、验证测试结果，测试程序如何在不同平台正常工作。还演示了Linux平台，一个叫AB(ApacheBench)的命令行web压力测试工具。
在讲的过程中大家提了很多问题，最后他还专门现场演示了一下TDD开发，以做一个计算器为例，边写测试程序，边进行计算器代码编写。而且也说明了这样开发软件的好处，有人提出当用户需求不断变化的时候，可能造成测试程序更大的变动，但一般的功能需求还是比较稳定的，比如计算器不可能让你一加一等于三吧？还有测试程序的复杂度必须低于软件本身代码，要不就难以起到测试验证的效果。这里我感觉主要是对功能需求的划分，保证软件代码变动时，测试程序仍然可用。
还从企业角度，如何把程序员从单调任务解脱出来，生产高质量的软件，避免一些形式化文档、测试。目前自己的感受就是，平时和同学的项目文档还是不够重视，这也导致文档在指导项目开发方面的作用减弱，有时甚至成为累赘。写测试程序也一样，一定要从解决实际问题出发。所以100％的测试程序通过率不一定能说明程序的高质量，一定要从功能需求入手写好单元测试程序。企业里一些开发方法虽然也有接触，但平时自己的小项目却很难采用，看来以后得从方法论的角度进行实战一下。
软件开发也是一门大学问，得专业呀！回来的路上，我们也商量把这种活动形式本地化一下，能够适合学生这个特殊群体。&lt;/p&gt;
&lt;p&gt;活动网站：&lt;a href="http://www.opensourcecamp.org.cn/showOneNews.do?newsId=375"&gt;http://www.opensourcecamp.org.cn/showOneNews.do?newsId=375&lt;/a&gt;
胡凯的博客：&lt;a href="http://iamhukai.blogspot.com/"&gt;http://iamhukai.blogspot.com/&lt;/a&gt;
胡凯的一个开源项目：&lt;a href="http://code.google.com/p/junit-ext/"&gt;http://code.google.com/p/junit-ext/&lt;/a&gt;&lt;/p&gt;</summary></entry><entry><title>(la la love on my mind)拉拉爱</title><link href="http://localhost:8000/programming/la-la-love-on-my-minde68b89e68b89e788b1.html" rel="alternate"></link><updated>2009-03-05T02:09:48+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2009-03-05:programming/la-la-love-on-my-minde68b89e68b89e788b1.html</id><summary type="html">&lt;p&gt;By Ann Winsborn &lt;/p&gt;
&lt;p&gt;La la la la la la… 啦……
Mhmm... 嗯……
You’re the la love of my life 你是我一生所爱
One way ticket and of life to live 体验生命的单程票
Pockets full of sunshine 装满阳光的口袋
Lots of love to give 可以奉献许许多多的爱
Longing for your kisses 向往你的吻
Longing for your arms to be holding me. 期待你用双臂将我环抱
I took the Friday night flight 我乘周五的夜机
Paris here I come 来到巴黎
Couldn’t live without you 生活不能没有你相伴
You're the only one 你是唯一
Got the note you wrote me – know it all by heart 收到你写给我的留言——明白句句情真意切
Oh nothing’s gonna keep us apart. 哦，什么也不能把我们分开。
There is only... 只有……
La la love on my mind, 爱在我心中，
Gonna leave my la la love on the line, 将要离开我的爱人，登上飞机
Baby just surrender, you’ll be la lucky tonight. 宝贝，放纵一下，今夜你会走运的
Looking out for ooh la la la l’amour 寻找真爱
And I’m gonna la la love you toujours. 我将永远爱你
There’s no doubt about it, 这毫无疑问
You’re the la love of my life. 你是我一生所爱
Don’t care about my suitcase, 别管我的旅行箱
Gonna grab a cab, 去叫辆计程车
Let your arms unfold me 向我展开你的双臂
Give you all I have 给你我的全部
Boy you got me dreamin’小子，你让我朝思暮想
You’re a kiss away 你是离别的一吻
In your arms I’m going to stay 在你怀里我不想离开
There is only... 只有
La la love on my mind, 爱在我心中
Gonna leave my la la love on the line, 将要离开我的爱人，登上飞机
Baby just surrender, you’ll be la lucky tonight. 宝贝，放纵一下，今夜你会走运的
Looking out for ooh la la la l’amour 寻找真爱
And I’m gonna la la love you toujours. 我将永远爱你
There’s no doubt about it, 这毫无疑问
You’re the la love of my life. 你是我一生所爱
There’s no doubt about it 这毫无疑问
You’re the la love of my life 你是我一生所爱&lt;/p&gt;
&lt;!-- more --&gt;

&lt;p&gt;如果你看到了这里，恭喜！这绝对不是话题广告！&lt;/p&gt;
&lt;p&gt;我去年在DP博客上看到了，一个交易链接的网站Text-Link(http://www.text-link-ads.com/)，去注册了一个帐号，过了一段时间卖了一个链接，每月收到2.5$，去年十月又卖了一个链接，每月多6.25$，也就是说现在每月8.75$。&lt;/p&gt;
&lt;p&gt;建站的同志们，虽然美元贬值了，但总比人民币贵吧！我只是想证明这个是真的，你们可以试试。Text-link销售链接的方式很多，我只是在wordpress上装了个插件，到目前为止我未发现有任何影响(不在页面显示任何东西)。&lt;/p&gt;
&lt;p&gt;说实话，我现在也没搞明白怎么销售链接，我只是装了插件，刀就自动来了。&lt;/p&gt;
&lt;p&gt;还有，被销售的两个链接都是英文字母，所以贴这篇歌词。听这首歌感觉很放松～就这么简单～&lt;/p&gt;</summary></entry><entry><title>Python查询五笔编码、拼音</title><link href="http://localhost:8000/programming/pythone69fa5e8afa2e4ba94e7ac94e7bc96e7a081e38081e68bbce99fb3.html" rel="alternate"></link><updated>2009-01-03T14:38:37+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2009-01-03:programming/pythone69fa5e8afa2e4ba94e7ac94e7bc96e7a081e38081e68bbce99fb3.html</id><summary type="html">&lt;p&gt;可以查询五笔的网站很多，还是觉得不方便，本来想利用一个字典，实现本地查询，结果没找到。下面是一个用Python写的从http://qq.ip138.com/在线查询汉字五笔编码和拼音的程序。&lt;/p&gt;
&lt;table class="highlighttable"&gt;&lt;tr&gt;&lt;td class="linenos"&gt;&lt;div class="linenodiv"&gt;&lt;pre&gt; 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67&lt;/pre&gt;&lt;/div&gt;&lt;/td&gt;&lt;td class="code"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;span class="c"&gt;#coding=utf-8&lt;/span&gt;
&lt;span class="c"&gt;#author: Jianjun Kong&lt;/span&gt;
&lt;span class="c"&gt;#website:http://kongove.whostas.com&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;urllib&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="nn"&gt;cookielib&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="nn"&gt;urllib2&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="nn"&gt;httplib&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="nn"&gt;string&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;&lt;span class="nn"&gt;os&lt;/span&gt;

&lt;span class="n"&gt;web_url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;http://qq.ip138.com/&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;web_url&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;wb/wb.asp?&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;string&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;init&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;cookie&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cookielib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CookieJar&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;opener&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;urllib2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;build_opener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;urllib2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;HTTPCookieProcessor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cookie&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="n"&gt;exheaders&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;User-Agent&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Firefox/3.05 (X11; Linux x86_64; U;en)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Connection&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Keep-Alive&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Referer&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://qq.ip138.com/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Accept&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;text/html,application/xml;q=0.9, application/xhtml+xml, image/png, image/jpeg,image/gif, image/x-xbitmap, */*;q=0.1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Accept-Charset&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;iso-8859-1,utf-8, utf-16, *;q=0.1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Cookie2&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;$Version=1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),]&lt;/span&gt;

    &lt;span class="n"&gt;opener&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addheaders&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;exheaders&lt;/span&gt;
    &lt;span class="n"&gt;urllib2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install_opener&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;opener&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;opener&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;opener&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;global&lt;/span&gt; &lt;span class="n"&gt;web_url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;

    &lt;span class="n"&gt;body&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;querykey&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;gb2312&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)),)&lt;/span&gt;
    &lt;span class="n"&gt;ret&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;opener&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;web_url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;urllib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;urlencode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;body&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ret&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;gb2312&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/tmp/wubi.tmp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;w&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;opener&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;opener&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;cmds&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
&lt;span class="s"&gt;sed -i -e &amp;#39;1,/&amp;lt;form name=&amp;quot;form1&amp;quot; method=&amp;quot;post&amp;quot;/d&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;
&lt;span class="s"&gt;sed -i -e &amp;#39;1,//d&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;
&lt;span class="s"&gt;sed -i -e &amp;#39;/&amp;lt;br&amp;gt;&amp;lt;/br&amp;gt;/,$d&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;
&lt;span class="s"&gt;sed -i -e &amp;#39;s/&amp;lt;tr&amp;gt;/&lt;/span&gt;&lt;span class="se"&gt;\r\n&lt;/span&gt;&lt;span class="s"&gt;/g&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;
&lt;span class="s"&gt;sed -i -e &amp;#39;1,/汉语拼音/d&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;
&lt;span class="s"&gt;sed -i -e &amp;#39;s/、/&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt;/g&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;
&lt;span class="s"&gt;sed -i -e &amp;#39;s/&amp;lt;td&amp;gt;/&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt;/g&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;
&lt;span class="s"&gt;sed -i -e &amp;#39;s/]*&amp;gt;//g;/&amp;lt;!--/d&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;
&lt;span class="s"&gt;sed -i -e &amp;#39;s/ //g;s/°C//g;s/^\s*//g;/^$/d&amp;#39; /tmp/wubi.tmp&lt;/span&gt;
&lt;span class="s"&gt;&amp;#39;&amp;#39;&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;sed -i -e &amp;#39;1,/&amp;lt;form name=&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s"&gt;form1&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s"&gt; method=&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s"&gt;post&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s"&gt;/d&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s"&gt;    sed -i -e &amp;#39;1,//d&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s"&gt;    sed -i -e &amp;#39;/\&amp;lt;br&amp;gt;&amp;lt;/br&amp;gt;/,$d&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s"&gt;    sed -i -e &amp;#39;s/&amp;lt;tr&amp;gt;/&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;r&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;n/g&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s"&gt;    sed -i -e &amp;#39;1,/汉语拼音/d&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s"&gt;    sed -i -e &amp;#39;s/、/&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;t/g&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s"&gt;    sed -i -e &amp;#39;s/&amp;lt;td&amp;gt;/&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;t/g&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s"&gt;    sed -i -e &amp;#39;s/]*&amp;gt;//g;/&amp;lt;!--/d&amp;#39; /tmp/wubi.tmp;&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s"&gt;    sed -i -e &amp;#39;s/ //g;s/°C//g;s/^\s*//g;/^$/d&amp;#39; /tmp/wubi.tmp&amp;quot;&lt;/span&gt;

    &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;system&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;  &lt;span class="s"&gt;&amp;quot;序号&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt;汉字&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt;五笔&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt;拼音&amp;quot;&lt;/span&gt;
    &lt;span class="c"&gt;#exit()&lt;/span&gt;
    &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/tmp/wubi.tmp&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt;
    &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;__main__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;

&lt;p&gt;运行效果&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;kongove&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;ubuntu&lt;/span&gt;&lt;span class="o"&gt;:~/&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;wubi&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;wubi&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;py&lt;/span&gt; &lt;span class="err"&gt;汉字&lt;/span&gt; &lt;span class="err"&gt;五笔拼音&lt;/span&gt; &lt;span class="err"&gt;查询&lt;/span&gt;
&lt;span class="err"&gt;序号&lt;/span&gt;  &lt;span class="err"&gt;汉字&lt;/span&gt;  &lt;span class="err"&gt;五笔&lt;/span&gt;  &lt;span class="err"&gt;拼音&lt;/span&gt;
&lt;span class="mi"&gt;1&lt;/span&gt;   &lt;span class="err"&gt;汉&lt;/span&gt;   &lt;span class="n"&gt;icy&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="err"&gt;à&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;
&lt;span class="mi"&gt;2&lt;/span&gt;   &lt;span class="err"&gt;字&lt;/span&gt;   &lt;span class="n"&gt;pbf&lt;/span&gt; &lt;span class="n"&gt;z&lt;/span&gt;&lt;span class="err"&gt;ì&lt;/span&gt;
&lt;span class="mi"&gt;3&lt;/span&gt;   &lt;span class="err"&gt;五&lt;/span&gt;   &lt;span class="n"&gt;gghg&lt;/span&gt;    &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="err"&gt;ǔ&lt;/span&gt;
&lt;span class="mi"&gt;4&lt;/span&gt;   &lt;span class="err"&gt;笔&lt;/span&gt;   &lt;span class="n"&gt;ttfn&lt;/span&gt;    &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="err"&gt;ǐ&lt;/span&gt;
&lt;span class="mi"&gt;5&lt;/span&gt;   &lt;span class="err"&gt;拼&lt;/span&gt;   &lt;span class="n"&gt;ruah&lt;/span&gt;    &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="err"&gt;ī&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;
&lt;span class="mi"&gt;6&lt;/span&gt;   &lt;span class="err"&gt;音&lt;/span&gt;   &lt;span class="n"&gt;ujf&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="err"&gt;ī&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;
&lt;span class="mi"&gt;7&lt;/span&gt;   &lt;span class="err"&gt;查&lt;/span&gt;   &lt;span class="n"&gt;sjgf&lt;/span&gt;    &lt;span class="n"&gt;ch&lt;/span&gt;&lt;span class="err"&gt;á&lt;/span&gt;
&lt;span class="mi"&gt;8&lt;/span&gt;   &lt;span class="err"&gt;询&lt;/span&gt;   &lt;span class="n"&gt;yqjg&lt;/span&gt;    &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="err"&gt;ú&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;
&lt;span class="n"&gt;kongove&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;ubuntu&lt;/span&gt;&lt;span class="o"&gt;:~/&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;python&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;wubi&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary></entry><entry><title>post和get的区别</title><link href="http://localhost:8000/programming/poste5928cgete79a84e58cbae588ab.html" rel="alternate"></link><updated>2008-01-01T14:03:16+08:00</updated><author><name>Amos</name></author><id>tag:localhost:8000,2008-01-01:programming/poste5928cgete79a84e58cbae588ab.html</id><summary type="html">&lt;p&gt;前些天看了些php&amp;amp;mysql的书，这两天复习功课头晕目眩之余，读了些php代码，其中对cocobear的留言板做了深入研究。放假准备在好好看些这方面的书，越来越喜欢php编程了，语法和C很像。下面把post和get的区别总结一下。&lt;/p&gt;
&lt;p&gt;post和get是传递表单数据两种不同方式，如果使用get方式，Url后边会包含"？name1=value1&amp;amp;name2=value2……"，而post则没有。&lt;/p&gt;
&lt;p&gt;1、Get 方法通过 URL 请求来传递用户的数据，将表单内各字段名称与其内容，以成对的字符串连接，置于 action 属性所指程序的 url 后，如&lt;a href="http://www.mdm.com/test.asp?name=asd&amp;amp;password=sad"&gt;http://kongove.whostas.com?name=kongove&amp;amp;password=linux&lt;/a&gt;， 数据都会直接显示在 url 上；Post 方法通过 HTTP post 机制，将表单内各字段名称与其内容放置在 HTML 表头(header)内一起传送给服务器端交由 action 属性能所指的程序处理，该程序会通过标准输入(stdin)方式，将表单的数据读出并加以处理。&lt;/p&gt;
&lt;p&gt;2、 Get 方式需要使用 Request.QueryString 来取得变量的值（ $user = $_GET['user']; ）；而 Post 方式通过Request.Form 来访问提交的内容（ $user = $_POST['user']; ）。&lt;/p&gt;
&lt;p&gt;3、Get 方式传输的数据量非常小，一般限制在 2 KB 左右，但是执行效率却比 Post 方法好；而 Post 方式传递的数据量相对较大，它是等待服务器来读取数据。不过也有字节限制，这是为了避免对服务器用大量数据进行恶意攻击，微软对用 Request.Form() 可接收的最大数据有限制，IIS 4 中为 80 KB 字节，IIS 5 中为 100 KB 字节。除非你肯定你提交的数据可以一次性提交，否则请尽量用 Post 方法。&lt;/p&gt;
&lt;p&gt;4、Get 方式提交数据，会带来安全问题，比如一个登陆页面，通过 Get 方式提交数据时，用户名和密码将出现在 URL 上，如果页面可以被缓存或者其他人可以访问客户这台机器，就可以从历史记录获得该用户的帐号和密码，所以出于安全性考虑表单提交建议使用 Post 方法。&lt;/p&gt;</summary></entry></feed>