---
author: amosk
comments: true
date: 2008-10-04 13:54:55+00:00
layout: post
slug: rm-%e5%88%a0%e9%99%a4%e6%96%87%e4%bb%b6%e8%87%aa%e5%8a%a8%e6%94%be%e5%88%b0%e5%9b%9e%e6%94%b6%e7%ab%99shell%e8%84%9a%e6%9c%ac
title: rm 删除文件自动放到回收站shell脚本
wordpress_id: 282
categories:
- Linux
---

很多人抱怨rm不能将删除的文件放到回收站，可是谁能保证万无一失呢？  我、DP……N多人貌似都失误过，如果设置每次删除文件都询问，一来麻烦，二来有时也会错误确认。今天有个同学又来问，以前好像听DP说过，可以用脚本解决。

于是自己写了一个，这个脚本只能把删除的文件小于100M的放到回收站，大于100M的会提示用户是否删除。主要考虑不同分区见文件拷贝占用空间和系统资源的问题，毕竟和图形界面放到回收站不一样。

0. 把此脚本拷贝到/usr/bin/myrm
1. 在~/.bashrc 添加一行 alias rm='myrm'
2.配置脚本里的文件大小限制,默认为100M

#!/bin/bash
#filename: myrm
#add a line "alias rm='myrm'" to ~/.vimrc
#then copy this file to /usr/bin

MAX=102400      #100M

if [ ! -d  ~/.Trash ] ;then
mkdir ~/.Trash
fi

line=`du -cs $@ |tail -n 1`
size=`echo $line |cut -d' ' -f1`

if (( $size < $MAX )); then
#echo "mv $@ ~/.Trash"
mv $@ ~/.Trash
else
#echo "/usr/bin/rm -i $@"
/bin/rm -i $@
fi
