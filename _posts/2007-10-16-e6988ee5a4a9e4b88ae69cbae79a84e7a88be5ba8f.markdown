---
author: amosk
comments: true
date: 2007-10-16 12:53:06+00:00
layout: post
slug: '%e6%98%8e%e5%a4%a9%e4%b8%8a%e6%9c%ba%e7%9a%84%e7%a8%8b%e5%ba%8f'
title: 明天上机的程序
wordpress_id: 122
categories:
- Web
---

对fork\wait\exec\exit的使用

    
    #include<stdio.h>
    #include<stdlib.h>
    #include<unistd.h>
    #include<sys/wait.h>
    
    int main()
    {
            pid_t   pid;
            pid=fork();
            if(pid>0){
                    printf("My Pid is :%d,Pid of my son is: %dn",getpid(),pid);
            }
            else    if(pid==0){
                            printf("My Pid is :%d,Pid of my father is: %dn",getpid(),getppid());
                            sleep(5);
                    }
                    else{
                            perror("Failed to fork!n");
                            exit(0);
                    }
            if(pid){
                    printf("Waiting my good son.....n0t");
                    fflush(stdout);
                    sleep(1);
                    printf("1t");
                    fflush(stdout);
                    sleep(1);
                    printf("2t");
                    fflush(stdout);
                    sleep(1);
                    printf("3t");
                    fflush(stdout);
                    sleep(1);
                    printf("4n");
            }
            fflush(stdout);
            wait(NULL);
            execl("/bin/echo","echo","Get the end of the process!",NULL);
            perror("Failed to execln");
    
    
    }



